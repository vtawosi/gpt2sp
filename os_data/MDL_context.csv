"Key","Created","SP","Timespent","Title","Description"
"MDL-9469","2007/04/20 23:06:25","3.0","930.0","""Forum: Ability to export content at the end of the term""","""My faculty would really like the ability to export the content from each forum as a record of the """"conversation"""" from each term.  That way, we could keep it as an archive or as a record of the activity in the class."""
"MDL-36088","2012/10/17 13:39:37","40.0","945.0","""Adding/modifying questions to/in the question bank is not logged""","""Adding questions through a quiz is logged, but I found that the action of adding a question to the question bank is not logged.    *Replication steps:*  # Log in as a teacher  # Navigate to a course  # Navigate to Settings > Course admin > Question bank  # Create a new question  # Modify an existing question  # Navigate to Navigation > My courses > CourseXXX > Reports > Logs (or look in the log table in the DB)  # Click 'Get these logs'    _Expected result:_ Question bank changes should be shown    _Actual result:_ No entries for adding/modifying question bank questions are recorded    Full list of missing events in question bank:  - Creating a question  - updating a question (should also be triggered when question is moved to a new category)  - deleting a question  - Duplicating a question  - Updating a question category (should also be triggered when category is moved to another parent)  - deleting a question category  - Importing questions (separate event is optional but still requires question_created event for each individual question)  - Exporting questions (note: crud=r)    Oddly there is one existing event \core\event\question_category_created"""
"MDL-52052","2015/11/06 20:38:00","5.0","315.0","""Import grades with an empty identifier causes bad upload but it doesn't show error message""","""When import grades with a csv like this (line 2 with an empty email):    student-email;grade1  student1@testing-moodle-grades.com;5  ;7  student3@testing-moodle-grades.com;10    Moodle loads this:    student1@testing-moodle-grades.com -> 7  student2@testing-moodle-grades.com -> -  student3@testing-moodle-grades.com -> 10    student1 gets the grade in line 2 and no error message is shown. Says """"Grade import success"""".    If there are more students, the ones above the empty, take the grade of the student below.    Thank you."""
"MDL-54554","2016/05/12 23:12:49","5.0","365.0","""Improve error handling for unoconv (Universal Office Converter)""","""In lib/filestorage/file_storage.php the function create_converted_document is used to call unoconv via a PHP exec() call. The return value is not checked and the $output array is set but never used.     I don't know if the intention was to revisit this before release but as it stands any problem with unoconv is going to fail silently (nothing logged) which isn't a good thing.     In order to avoid meltdown in the support forums, this needs to be as robust as it possibly can be. """
"MDL-55192","2016/07/12 18:11:49","1.0","80.0","""Final deprecation of add_to_log()""","""It's been deprecated since 2.7. """
"MDL-56223","2016/10/01 08:42:20","3.0","3906.0","""CLI Calendar Event Updated/Created bug affecting database/logs""","""Moodle v3.0.3+ (Build: 20160324)    We were seeing some CPU spikes and overloaded php-fpm threads which seemed to be affecting one of our nodes making it unresponsive (we have 3).    Further research looks like it may be related to random calendar events in the logs. They are intermittent with approx 1071 transactions per second occurring intermittently (looks like about every hour and 15 mins).      They are always related to the same user with Calendar Event Updated/Created    User full name: Administrator  Affected user: name of one specific user  Event context: User: same user as above  Component: system  Event name: Calendar event updated/created  Origin: cli    Is this related to https://tracker.moodle.org/browse/MDL-46539 ?  """
"MDL-56789","2016/11/07 11:50:47","1.0","600.0","""Recycle bin warns of pending grade items being deleted even if no grade items are being deleted.""","""At the moment, when any module (or resource) is deleted (via the recycle bin) the gradebook will display a warning that grade items are pending deletion. This is regardless of whether the deleted item has any grade items to delete or even uses the gradebook."""
"MDL-57487","2016/12/21 18:19:23","1.0","405.0","""Final deprecation of xxx_print_overview() and related functions""","""These were deprecated in -MDL-57434- (please check the commit as a WS was also deprecated).    Also, please remove the strings from the activity modules that are only used by these deprecated functions."""
"MDL-57618","2017/01/11 11:57:01","1.0","210.0","""Remove strings deprecated in 3.3""","""Remove strings from language files under the heading """"Deprecated in Moodle 3.3"""" and the respective lines in deprecated.txt files    See also https://docs.moodle.org/dev/String_Deprecation  """
"MDL-57632","2017/01/12 14:25:07","1.0","80.0","""Final deprecation of media_manager::setup()""","""Final deprecation of media_manager::setup(). It was deprecated in MDL-57316"""
"MDL-59510","2017/07/12 20:32:34","5.0","3290.0","""Keep OAuth 2 connections alive across users' sessions""","""Access tokens can be very short-lived: [https://tools.ietf.org/html/rfc6749#section-4.2.2] exemplarily specifies a lifetime of one hour, which is implemented accordingly in [ownCloud|https://github.com/owncloud/oauth2/blob/cf7030163e9bfff879e4d1d03301b573b1e109d1/lib/Controller/OAuthApiController.php#L192] and [Nextcloud|https://github.com/nextcloud/server/blob/13295c2d1ddf3e4daf491a6c41303dbd1dc40b68/apps/oauth2/lib/Controller/OauthApiController.php#L82.]     This results in situations in which users have to re-authorise Moodle after one hour is elapsed. I assume that this will be very annoying.    However, ownCloud authorisations transmit a refresh token that is used to obtain a new access token without manual interaction. The refresh token mechanism is already supported for (and used by) connected system accounts, and should be extended to connected user accounts accordingly.    Alternative solution: Increase the expiry period of access tokens in affected services, i.e. try to convince own- / Nextcloud to change this. However, this does not solve the general case. Also I think that short-lived access tokens are sensible, e.g. to prevent replay attacks."""
"MDL-59524","2017/07/13 16:34:02","1.0","245.0","""Remove strings deprecated in 3.4""","""Remove strings from language files under the heading """"Deprecated in Moodle 3.4"""" and the respective lines in deprecated.txt files    See also https://docs.moodle.org/dev/String_Deprecation    """
"MDL-59639","2017/07/27 20:35:43","1.0","231.0","""Browser back button should work as expected in the administration menu with Boost theme""","""A well known 'rule' of the web is not to compromise the functionality the browser's back button    Unfortunately, the admin pages do this.     To reproduce....   * From the flat menu, choose site administration   * Select (for example) Appearance tab and then theme settings   * The theme settings form appears.    * Press 'back'    You would expect to be back to the previous page - the Appearance tab. However, you are not. You are viewing the first tab of the administration menu. """
"MDL-60817","2017/11/15 23:23:08","1.0","910.0","""Notify the user when the original file extension has been removed or modified upon file editing in the filepicker""","""Quite commonly, users remove the document file extension when editing the filename in the filepicker, without being aware of that.    In some specific cases, for ex. students editing the name of an existing assignment submission file, if the extension is removed or modified it can cause failure in the document conversion in the assignment.    Improving the UX in the filepicker, by notifying the users when the original file extension has been modified would greatly reduce these occurrences."""
"MDL-60827","2017/11/16 15:55:31","3.0","414.0","""OAuth 2 still expecting email verification after """"Require email verification"""" has been disabled""","""Some users when they try to login on moodle receive the fallowing massage """" This account is pending email confirmation. """" even if I have the setting Site administration -> Server -> Oauth 2 Services -> Require email verification ( Unchecked ). It seems that users don't find the confirmation mail ( probably ended up in spam and was delete ). Is it possible to resend the confirmation email ? or any other way to solve this problem ?    The authentication method is by using OAuth 2 Google service  """
"MDL-61649","2018/03/15 00:05:33","1.0","690.0","""Several core emails provide only text format""","""Some core emails (see list below) only provide the email_to_user function with a text format message rather than providing the (currently optional) HTML message as well.    This has two drawbacks:    1) Users who opt to receive HTML emails, will sometimes (with no obvious pattern) recieve text emails from their Moodle site which might make them wonder if their settings are correct and/or if these messages are really coming from their Moodle. Many of these messages are around authentication, so that confidence is probably important.    2) Sites that use the new email wrapping mustache templates core/html_email.mustache will have these text only emails automatically converted to HTML, which works fine for text only content, but anything with a link in it will no longer be clickable, just displayed as text.     $autohtml = trim(text_to_html($messagetext));    Possible areas to improve:    lib/authlib.php  781=function login_lock_account($user) \{  822:            email_to_user($user, $supportuser, $subject, $message);    lib/classes/task/send_failed_login_notifications_task.php  29=class send_failed_login_notifications_task extends scheduled_task \{  177:                email_to_user($admin, \core_user::get_noreply_user(), $subject, $body);    lib/moodlelib.php  6100=function setnew_password_and_mail($user, $fasthash = false) \{  6129:    return email_to_user($user, $supportuser, $subject, $message);  6139=function reset_password_and_mail($user) \{  6173:    return email_to_user($user, $supportuser, $subject, $message);  6232=function send_password_change_confirmation_email($user, $resetrecord) \{  6252:    return email_to_user($user, $supportuser, $subject, $message);  6262=function send_password_change_info($user) \{  6282:        return email_to_user($user, $supportuser, $subject, $message);  6303:    return email_to_user($user, $supportuser, $subject, $message);    user/edit.php  273:        if (!$mailresults = email_to_user($tempuser, $noreplyuser, $emailupdatetitle, $emailupdatemessage)) \{         Possibly it's worth considering making the HTML format non-optional."""
"MDL-62497","2018/05/18 11:41:27","1.0","9430.0","""Add a new transpilation tool for ES6""","""Need to look at a transpilation tool for ES6.  It would be _nice_ if it transpiled to and AMD module, and took precedent over the existing AMD modules if there is a name clash.  This way we can migrate existing AMD code to ES6 native, without breaking existing AMD modules using that code."""
"MDL-63032","2018/08/01 11:50:04","3.0","270.0","""CLONE - Update windows timezone list in core_date""","""   Update lib/classes/date.php badzones to the latest time zone information.    https://support.microsoft.com/en-us/help/973627/microsoft-time-zone-index-values should translate over to http://php.net/manual/en/timezones.php    Use the IANA timezone information database - https://www.iana.org/time-zones      Please create a clone of this issue for next version before closing this"""
"MDL-63048","2018/08/02 12:47:38","3.0","271.0","""CLONE - Remove old class renames""","""core_component looks for COMPONENT/db/renamedclasses.php files, it allows us to avoid traumatic transitions and BC breakages by listing classes that have been removed.    We need to clean the list at some point."""
"MDL-63261","2018/08/30 15:31:57","1.0","2875.0","""Final deprecation of web services in message/externallib.php""","""A whole bunch were deprecated due to MDL-57272 and MDL-63676. Do a grep for 'MDL-63261' in the codebase to find out what can be removed."""
"MDL-63580","2018/10/08 11:51:33","3.0","865.0","""Deprecate dupe cron_run_single_task() function""","""Working on MDL-60514 we created a new class that does cron_run_single_task() never used again in the core."""
"MDL-63612","2018/10/10 17:37:35","3.0","245.0","""Course card pattern colours may be specified by an admin""","""In MDL-63337 the course colour hex values were move to the course_summary_exporter.php in course/classes/external    These colours should be configurable form a location like the themes or global theme settings."""
"MDL-64821","2019/02/11 02:06:19","1.0","5082.0","""Create new discussion view for forum""","""Create a new discussion view mode that matches the prototype.    Prototype:  https://projects.invisionapp.com/share/2ATP7L7JYXP#/screens/381579783  (previously https://projects.invisionapp.com/share/9GQ8R2O3H7J#/screens/350489133)    h4. Beyond scope of this issue:  * Discussion header content (e.g. subscribed button, settings, view selector, move discussion selector etc) can all remain as is for now  * Badges images being moved into a modal. For this issue they can just be rendered under the user image as they are in the other views  * Emoji reactions  * The top header part of the prototype with filters, grading, settings etc    h4. Acceptance criteria  * UI should match the prototype as closely as possible  * All content for posts should be included when enabled, e.g. attachments, word counts, ratings etc  * Accessibility should not be made worse, i.e. keyboard navigation, contrast ratios, screen reader labels etc"""
"MDL-65016","2019/03/08 10:02:46","1.0","210.0","""Many emails are sent if refreshing the OAuth2 token of a system account fails""","""In the context of OAuth2, if the token of a system account cannot be refreshed for some reason, all( ! ) administrators get an hourly( ! ) notification about this problem.    There may be several reasons that can lead to this, including a) the refresh token has expired for some reason, b) authorisation has been revoked in the target system, c) the target system is not reachable (e.g., in maintenance). In either case, it is necessary to look into this. However, not every admin has to do this; in our case, most of them don't even know what this means...    (By the way, the """"hourly"""" part is fine. It's just that not everyone needs to be informed. The main administrator should be sufficient. For example, our main administrator's emails are managed by an issue tracker, which we use to assign tickets to the intended person. Others may use the main admin's email to forward the notification accordingly.)    Expected behaviour:  Only the main administrator gets emails informing about the failure."""
"MDL-65151","2019/03/22 02:37:42","1.0","220.0","""Final deprecation of section_edit_controls() in course/format/renderer.php""","""section_edit_controls() in course/format/renderer.php was deprecated in 3.0 (MDL-48947). It should be removed now.     """
"MDL-65205","2019/03/28 10:23:42","3.0","469.0","""Messaging interface assumes secondary color is light shade""","""The messaging interface in Boost uses bg-secondary behind some text but assumes that it's a pale shade, since it puts hardcoded gray and dark gray text on top of it.    The text colors should use color-yiq functions to ensure they are readable if the secondary color is set to something else."""
"MDL-65219","2019/03/29 12:37:09","3.0","870.0","""Broken link in messages contact request notification""","""Hi,    We notice a very small problem in contact request notification   * User A send a contact request to user B   * User B click on notifications icon , then on the link """"View full notification""""   * At the bottom of the page, the link """"Go to"""" is broken (file not found)    message/classes/api.php :   line 2511 : $url = new \moodle_url('/message/pendingcontactrequests.php');    but file ../message/pendingcontactrequests.php don't exist    I saw in MDL-63310 :  """"Don't forget to remove the stub page message/pendingcontactrequests.php""""    Thanks a lot"""
"MDL-65221","2019/03/29 13:42:06","1.0","450.0","""Add behat test for new UI to manage messaging notification preferences""","""Feature  In order to be notified of messages  As a user  I need to be able to update my messaging notification preferences    Scenario    Update notification preferences: Email"""
"MDL-65724","2019/05/27 10:17:41","3.0","621.0","""Import: Disabled general restore default values override import settings""","""Hi there,    due to a support issue from one of our clients, we've encountered this issue.     *Problem*  Within the import dialogue you can decide for some aspects like activities, groups or blocks etc. to be included in the import or not. Unfortunately, even if a user enables, for example, the group and groupings option, the groups and groupings will not be included in the restore controller if the default restore setting _restore | restore\_general\_groups_ is disabled.    *Steps to reproduce*  We use the option for groups and groupings exemplarily. The behavior is identical for all import options.  # Login as admin  # Set the value *restore | restore_general_groups* to *No*  # Create three Courses: """"Course 1"""", """"Course 2"""" and """"Course 3"""" and enrol a teacher to those courses  # Login as this teacher  # Go to """"Course 1""""  # Autocreate groups """"Group 1"""" - """"Group 5"""" and don't allocate any students to these groups  # Make sure you have those Groups in your Course  # Go to """"Course 2""""  # Select the import from """"Course 1""""  # Verify that the option _Include groups and groupings_ is checked  # Perform the import and press _Continue_  # Go to your group page and verify that there are no Groups in """"Course 2"""" and so no import of the groups was performed  # To counter check, login as admin again and set the value *restore | restore_general_groups* to *Yes*  # Login as the teacher and go to """"Course 3""""  # Repeat the steps 9 - 11  #  Go to your group page and verify that the 5 groups from """"Course 1"""" are imported    *Possible cause*  The import function doesn't has any interactive UI to control the options for the restore process. In fact, they are not needed as the user declared his wish within the import UI. So Moodle should only use the created backup file and restore this independent from any default values. However, within the restore_controller.class the defaults will be applied: https://github.com/moodle/moodle/blob/master/backup/controller/restore_controller.class.php#L146    We think this is the same problem as it was reported and fixed with the recycle bin (MDL-63263, MDL-65218) and it's a regression from introducing the general restore default values (MDL-34859).    *Intended behavior*  First of all, Moodle should present all the settings that are selectable on the general restore default value page. Currently only a small subset is presented on the UI for the import. Then a backup should be created and without any changes due to default settings this backup file should be restored to the new course.    Best, Kathrin"""
"MDL-65741","2019/05/29 03:09:12","3.0","370.0","""Replace PHPExcel with PHPSpreadsheet""","""https://github.com/PHPOffice/PhpSpreadsheet"""
"MDL-65743","2019/05/29 03:13:56","1.0","539.0","""Upgrade XMPPHP to latest version""","""h1. Options    h2. Upgrade    XMPPHP /lib/jabber/ 0.1rc2-r77 2.2 No https://github.com/BirknerAlex/XMPPHP    Has been forked and moved. This is the most up-to-date fork I could find but whomever picks up this issue should confirm this.    h2. Remove  Consider removing XMPPHP and the {{message_output_jabber}} plugin from core."""
"MDL-65835","2019/06/04 01:47:16","5.0","405.0","""deprecate plagiarism_get_form_elements()""","""we should deprecate plagiarism_get_form_elements() and recommend the use of the coursemodule callbacks (added in 3.1)    The """"replacement"""" function would be to use plagiarism_get_form_elements - but by using callbacks plugin devs can also hook into the validation/edit_post_actions functions as well which wasn't possible using plagiarism_get_form_elements"""
"MDL-65869","2019/06/07 14:33:43","1.0","75.0","""Remove the @app tests from core""","""In order to add more @app tests for the core feature in a consistent way, it has been decided to have all them placed in a local plugin for app tests which just has app tests: [https://github.com/moodlehq/moodle-local_moodlemobileapp/]    Although a few core feature behat @app tests were included in MDL-63977 (i.e. forum) to check the framework works, there was never any intent to provide behat tests for app functionality for core.    The reason behind that decision is that the core functionality provided in the app (activities, course, navigation) is all native to the app; the 3rd party plugins are all written within the Moodle plugin and are just presented in the app. The forum one is a case in point. That test was written when the app was at 3.6.0 and it worked. It continued to work at 3.6.1 of the app and was also working last week after the release of Moodle 3.7.0. Since then the app has had a forum update which causes all existing forum behat to fail. That is not due to a failure in Forum, or the core Web Services, or the core Behat. It's due to a change in the App itself and the interactions that it presents. A contrib plugin has its own mobile code bundled with its own behat tests. Aside from major refactors of the mobile app, both the UI presentation, and the tests are fully under control of the developer. For core functionality, including core plugins like forum, the functionality in the app is provided natively by the app and not Moodle but we are adding tests for this functionality to Moodle. Whilst we can use the @app_upto3.6.1 it's still not going to help us in the long term because we have no way of identifying which tests are going to fail, up until they do fail, by which point we've already released.         So instead of fixing the issues raised with app-3.7 in MDL-65832, we are going to close it and remove completely the @app tests from core."""
"MDL-65896","2019/06/12 05:48:19","3.0","3338.0","""Add emojis to messaging""","""Add emoji support to messaging as is common in most standard messaging services."""
"MDL-65918","2019/06/13 19:06:39","1.0","242.0","""Error during first OAuth2 login for existing account (Call to undefined function auth_oauth2\profile_save_data())""","""When I set up an account with the """"oauth2"""" auth type (using a custom OAuth2 issuer, in this case), the first time the user logs in with OAuth2 she will receive the following error:    Exception - Call to undefined function auth_oauth2\profile_save_data()    Stack trace:   * line 354 of /auth/oauth2/classes/auth.php: Error thrown   * line 536 of /auth/oauth2/classes/auth.php: call to auth_oauth2\auth->update_user()   * line 49 of /auth/oauth2/login.php: call to auth_oauth2\auth->complete_login()         The problem seems to have been introduced in this commit from December 2018, when the call to `profile_save_data()` was added without also requiring `user/profile/lib.php`:  [https://github.com/moodle/moodle/commit/e2b812fc4028ebf40c4fbb1cdad293a825d84079#diff-53adc3a153341eaa9eb2d5e086e88519R354]         A fix that worked for me was to simply add       {code:java}  require_once($CFG->dirroot.'/user/profile/lib.php');   {code}  under the other require_once() statements at the top of *auth/oauth2/classes/auth.php*.          Unfortunately I don't anticipate having the time to go through the process of becoming a new contributor and submitting code for peer review anytime soon. I hope this is a good enough start to get this fixed in a future release."""
"MDL-65928","2019/06/14 09:56:58","2.0","463.0","""Create a toggle-all checkbox output component""","""h5. Who is this project for?  * For Moodle devs!; and   * Ultimately for Moodle users!    h5. What is the problem that you're trying to solve?  * [~dobedobedoh] created the awesome core/checkbox-toggleall AMD module. However, to be able to use it, you will have to do various stuff first (e.g. import the AMD module, manually edit the HTML/attributes of the elements to add the required data attributes, etc).  * It currently doesn't have support for toggling the state of action elements (e.g. buttons that perform actions on the selected items.   * It currently doesn't support toggling of nested checkbox elements (e.g. master checkbox toggles all checkboxes, while another master checkbox that toggles a subset of those checkboxes)    h5. Why does it need solving?  * It would help developers to easily use the checkbox_toggleall element!  * We'll be able to provide a more consistent method of selecting/deselecting items on a list.    h5. How does your project tackle the problem?  * The patch for this issue provides an easier way for developers to output a toggle-all checkbox that can control a group of checkboxes on a list. Developers will simply have to implement the following:  *# Define master checkbox(es) - responsible for toggling the checkboxes in the list.  *# Define slave checkboxes  *# (Optional) Assign appropriate data attributes to action elements. Action elements are those who perform actions on the selected items.  * The improvements on the core/checkbox-toggleall will also  ** enable support for toggling the state (enabled/disabled) of  action elements. This will help us clean up the custom JS code for enabling/disabling the action elements scattered all throughout moodle.  ** allow master checkboxes to belong to multiple toggle groups. In other words, this means that master checkboxes can control one or more groups of checkboxes. This is particularly helpful for selecting multiple items belonging to different groups. """
"MDL-65937","2019/06/17 08:30:36","1.0","215.0","""Use the checkbox-toggleall component for the lesson activity""","""h5. Who is this for?  * Moodle users who can manage lesson activities (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component which aims to improve the UI and UX by:  **  having a master checkbox for toggling the checked states of the checkbox elements in the items list.  ** making the """"{{With selected}}"""" select box enabled only when there's at least one item selected."""
"MDL-65938","2019/06/17 10:16:36","1.0","360.0","""Use the checkbox-toggleall component for the quiz activity""","""h5. Who is this for?  * Moodle users who can manage quiz activities (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component which aims to improve the UI and UX by:  ** having a master checkbox for toggling the checked states of the checkbox elements in the quiz items list when editing a quiz.  ** making the action button """"{{Delete selected}}"""" button enabled only when there's at least one item selected.  ** having a master checkbox for toggling the checked states of the checkbox elements for the quiz attempts table.  ** making the action buttons """"{{Regrade selected attempts}}"""" and """"{{Delete selected attempts}}"""" enabled only when there's at least one item selected.  """
"MDL-65948","2019/06/18 05:59:52","1.0","505.0","""Use the checkbox-toggleall component for the gradebook setup page""","""h5. Who is this for?  * Moodle users who can manage the grade book (e.g. teachers, course managers, etc)    h5. What is the problem that you're trying to solve?  * The inconsistent way of checking items on a list throughout Moodle    h5. Why does it need solving?  * A consistent way of checking items on a list would provide a better user experience    h5. How does this issue tackle the problem?  * The patch for this issue will implement the usage of the checkbox-toggleall output component in the """"Gradebook setup"""" page. This aims to improve the UI and UX by replacing the """"{{All / None}}"""" links in the grade categories with master checkboxes for toggling the checked states of the grade items under the corresponding grade category.  """
"MDL-66034","2019/06/28 10:03:03","1.0","3270.0","""Log role changes in more detail ""","""The Danish Data Privacy Agency has due a privacy incident where a role misconfigured (which gave students access to too much data) expressed their criticism on Moodle.     Currently Moodle only logs the following on a role change:    !https://i.imgur.com/htRETGn.png!    The Privacy Agency har criticized that it is not logged what the actual change in the role was, hence making it impossible to detect when the misconfiguration occurred.     Furthermore this is logged in the normal moodle-log which automatically rolls over  - I think standard is 90 days or so.    We propose that role changes on system level are logged in the config-log and that the normal role-change is expanded.    Furthermore role-overrides needs to be logged in more detail as well.  """
"MDL-66078","2019/07/04 05:24:50","2.0","540.0","""Add WS and display to show all content for a user""","""Will be called by the user selector and paginator.    Will take:  # cmid  # userid  # groupid (optional)  # page (optional)    Possibly other options in the future."""
"MDL-66079","2019/07/04 06:43:45","2.0","3060.0","""Add configuration to show grading options in the Forum settings""","""Given I add a new forum  And I press """"Edit settings""""  Then I should be able to apply a rubric    I believe we need to:  # define the FEATURE  # define a grading function """"{{forum_grading_areas_list}}""""    There may be other things to do also.    I think that we may want to consider having _multiple_ grading items.  The gradebook supports having multiple grades for a single activity. We may want to consider having items for:  * forum (grade for all posts in a forum)  * discussion (aggregate of all graded discussions)  * post (aggregate of all graded posts)  * ratings    I suspect we'll need to look at forum, and ratings initially and we may no need to do anything initially, but have to consider it now for a later point."""
"MDL-66110","2019/07/09 12:22:39","2.0","796.0","""Error reading from database after upgrade to 3.7.1 (MySQL 8.0.2)""","""When trying to upgrade from version 3.3 to 3.7.1, we get an error:    Default exception handler: Error reading from database Debug: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'groups g   ON mc.itemid = g.id   WHERE mc.compo' at line 3  SELECT mc.id   FROM message_conversations mc   LEFT JOIN groups g   ON mc.itemid = g.id   WHERE mc.component = ?   AND mc.itemtype = ?   AND g.id is NULL  [array (   0 => 'core_group',   1 => 'groups',  )]  Error code: dmlreadexception  * line 486 of \lib\dml\moodle_database.php: dml_read_exception thrown  * line 1245 of \lib\dml\mysqli_native_moodle_database.php: call to moodle_database->query_end()  * line 2743 of \lib\db\upgrade.php: call to mysqli_native_moodle_database->get_records_sql()  * line 1809 of \lib\upgradelib.php: call to xmldb_main_upgrade()  * line 518 of \admin\index.php: call to upgrade_core()         Probable reason in the keyword """"GROUPS"""" - from version MySQL 8.0.2 this word is reserved and forbidden by standard SQL as column or table names  ([https://dev.mysql.com/doc/refman/8.0/en/keywords.html])"""
"MDL-66143","2019/07/15 03:37:56","5.0","750.0","""As a teacher, I want to be able to create a course in relative dates mode, so that students can take the course any time""","""Add a new setting to the course to allow the teacher to choose between fixed dates or relative dates.    Acceptance criteria:  * An admin setting should be added to enable """"relative dates"""" as an experimental feature  * Relative date courses can not be created unless the experimental feature is enabled  * A course can not be changed between relative or fixed dates once it has been created  * A warning is visible when using the feature, telling them that they cant change the value once set (in the course edit form)    Edit: Decision was made such that the experimental feature toggle will only affect new courses. Existing courses remain in their respective mode.    This does not include backup and restore."""
"MDL-66144","2019/07/15 03:43:38","3.0","666.0","""As a student in a weeks-format course, I want to be able to see the weekly dates displayed relative to my start date, so that I can plan my coursework""","""When a relative dates course is set to the """"weekly"""" course format the dates for each section should be relative dates for the user.    Acceptance criteria:  * Dates should only be relative when the course is set to """"relative dates"""""""
"MDL-66147","2019/07/15 04:09:43","1.0","3121.0","""As a teacher, I want to be able to create an assignment activity with a 'due date' relative to the student course start date, so that the student can complete the full course""","""A teacher should be able to create an assignment activity with a relative due date. The due date should be relative to when the student begins the course.    Acceptance criteria:   * Due date is only relative when the activity is in a course set to relative dates   * Student sees a relative date on submission page   * Teacher sees the student's relative due date when grading   * Teacher sees the student's relative due date when viewing submissions   * Does not include handling overrides in this issue   * Does not include handling extensions in this issue   * Does not include showing calendar events for the student int his issue   * Does not include access restrictions based on date.   * Sort by due date/status in view all submissions table should be disabled   * Web services should be updated"""
"MDL-66150","2019/07/15 04:28:14","3.0","851.0","""Forum report: Discovery""","""Discovery and [specification document|https://docs.google.com/document/d/1JD2G3ZBewj4QkfhB70A7hOdHLgWca5TVNbNHaDtXktw/edit?usp=sharing] write-up for the forum summary reporting project.     """
"MDL-66153","2019/07/15 08:04:07","1.0","4338.0","""Forum report: Basic skeleton""","""Create a basic skeleton for the Forum report.   # Create new forum subplugin for forumreport   # Summary for single forum   # No Download required initially   # No filtering required initially   # Basic fields: Names, Reply counts, Created discussion count"""
"MDL-66264","2019/07/29 02:58:50","1.0","450.0","""Investigate integration with rocket chat""","""[Rocket chat|https://rocket.chat/] is an open source clone of Slack which offers a more fully featured chat experience than in-built Moodle messaging.    While it's important to keep a messaging solution that ships with Moodle it might also be worth looking at the possibility of an integration with Rocket.chat for institutions that require a more feature full messaging experience (i.e. Workplaces)."""
"MDL-66268","2019/07/29 08:14:50","2.0","6394.0","""Groups filter in forum summary report""","""Set up the filter area in the report interface, and add ability within that filter area to choose which group(s) within that forum are shown."""
"MDL-66298","2019/08/01 02:55:38","4.0","3437.0","""Forum summary report option to message selected users""","""See participants report for how we do this.  We need to add a new column to select users, and a way of messaging those users.    # As a teacher, to allow me to message a student who is not interacting regularly, I want to be able to message that student  # As a teacher, to allow me to message several students who are not interacting regularly, I want to be able to send a message to multiple users.  # When I send a message to multiple users, those users should only see the conversation between that one student and the teacher who initiated the conversation."""
"MDL-66301","2019/08/01 02:57:53","1.0","5348.0","""Add ability to summarise all forums in a specific course""","""The forum summary report only shows the current forum. We should extend this so it is able to provide a summary report of all forums in a specific course.    The scope of this issue is that (by default) teachers will be able to view the summary report for exactly one forum in a course (current functionality), or all forums in a course (that they have access to)."""
"MDL-66362","2019/08/11 07:15:05","2.0","435.0","""Add """"breadcrumb"""" to top corner of grading window""","""Add the breadcrumb region to the grading window to help identify which activity is being graded."""
"MDL-66364","2019/08/11 07:17:17","3.0","759.0","""Add parent post snippet""","""When grading a post which is a reply, show the first [n] characters of the previous post in order to give context to the discussion being graded."""
"MDL-66365","2019/08/11 07:18:17","3.0","510.0","""Add a button to display the entire discussion for a post being graded""","""Contextual information is important. We should provide a mechanism to view the entire discussion for the content being graded."""
"MDL-66369","2019/08/12 05:08:37","1.0","210.0","""Remove all instances of [modname]_scale_used""","""This should have been done in MDL-51883 for 3.6 but the deprecation was not fully done.    These functions were only used by the deprecated function which was deprecated in 3.1, and removed in 3.6. They should have been removed at the same time."""
"MDL-66371","2019/08/12 06:31:44","1.0","530.0","""Forum: add behat test covering forum export""","""Add appropriate behat + unit tests."""
"MDL-66372","2019/08/12 08:04:58","2.0","938.0","""Implement summary report pagination size""","""Implement results per page on the forum summary report, to control how many results are returned during pagination.    To start with, we should only accept 50 (default), 100, 200 as options, possibly fall back to the default  if another value is specified, since it is not worth failing the request just for an invalid pagination value.    Be aware that the summary report currently implements the null privacy provider, so unless you wish to set up the provider, in the first instance it is probably better to just keep the 50 default and not store a user preference for it."""
"MDL-66373","2019/08/12 08:06:26","6.0","5022.0","""Dates filter in forum summary report""","""Date filters for start/end   2 x story points"""
"MDL-66455","2019/08/21 05:18:36","1.0","347.0","""Site level calendar subscriptions are not being listed in the Manage subscriptions page""","""To reproduce:   # Log in as admin.   # Go to the calendar   # Press """"{{Manage subscriptions}}""""   # Enter a calendar name.   # For the """"{{Calendar URL}}"""" field, enter the following URL of a public test Google calendar: https://calendar.google.com/calendar/ical/moodle.com_gverd91agb5htmi8ervnn6q2j0%40group.calendar.google.com/public/basic.ics  # Under """"{{Type of event}}"""", choose """"{{Site}}""""   # Press """"{{Add}}"""".   # *Expected*   #* The events are successfully imported as site events.   #* The site-level subscription gets listed.   # *Actual*   #* The events are successfully imported as site events.   #* The site-level subscription is not being listed. """
"MDL-66477","2019/08/23 05:15:15","1.0","3120.0","""Create settings side drawer for new discussion view""","""Create a settings side drawer for the new forum view that contains all of the discussion header settings.    The settings panel can contain a few sections such as:  * General with toggles for  ** subscription  ** star  ** pin  ** locked  * View which shows the view selector  * Move which shows the move selector  * Export to portfolio button (if enabled)    The prototype here shows the side panel without any content:  https://projects.invisionapp.com/d/main/?origin=v7#/console/18367584/381579786/preview  ([old prototype|https://projects.invisionapp.com/share/9GQ8R2O3H7J#/screens/350489133])    See the """"settings"""" part of the messaging drawer for an example of how it might look.    h4. Implementation details  * It would be good to create generic side drawer code/component which can be re-used between this and the messaging drawer    h4. Acceptance criteria  * Discussion heading options are all moved into a settings side drawer"""
"MDL-66481","2019/08/23 05:40:56","1.0","2925.0","""Update display of discussion in discussion list table""","""Update the display of the discussion list table on the discussion list page (mod/forum/view.php) to match the prototype:  https://projects.invisionapp.com/share/9GQ8R2O3H7J#/screens/350489135    h4. Acceptance criteria  * Table can be sorted by the columns  * Clicking on the unread replies label takes the user to the first unread reply on the discussion  * """"Following"""" in the prototype is actually """"Subscribed""""  * The star toggle should be visible unless the discussion is pinned, in which case the pin will be displayed  * Clicking the star toggle should star or unstar the discussion"""
"MDL-66502","2019/08/26 22:26:59","1.0","65.0","""Moodle 3.8 does not load javascript files from previous moodle versions""","""When calling an amd module on moodle 3.8 which was minified using a previous moodle version, the javascript doesn't get loaded and I get the following error in the console:  {quote}Error: No define call for lifecyclestep_adminapprove/link-steps   [http://requirejs.org/docs/errors.html#nodefine]  {quote}  To test it, you can use the 'Test plugin from previous version of Moodle' testing instruction from MDL-62497 .    It seems not to be the fault of the block_counter, since javascript also didn't work in two other plugins when minified using a previous moodle version, but they all work when the javascript is minified using moodle38."""
"MDL-66594","2019/09/04 04:25:09","1.0","445.0","""Add columns to show earliest and most recent post timestamps""","""Add two columns to the forum summary report, one for each user's earliest post, and one for their most recent."""
"MDL-66607","2019/09/05 09:03:35","2.0","412.0","""Random messaging failure""","""Copied from MDL-65493.    It looks like the {{getLoadNewMessagesCallback}} function's callback publishes the {{MessageDrawerEvents.CONVERSATION_NEW_LAST_MESSAGE}} along with the conversation Id of the now deleted conversation at around the time that the conversation I also deleted, and I suspect that this causes it to be re-added.    This happens in the {{resetMessagePollTimer}} for the {{backOffTimer}}.    Essentially the timer was running, and a conversation did exist, but it was deleted before the {{PubSub}} completes. The Publish of the new last message event occurs after the conversation has been deleted, and as a result it gets re-created.    I'm not sure how best to fix this one. A few things spring to mind, but they may not be ideal...    # stop timers, and cancel any ongoing requests while dialogues are open or not on the relevant screen  # ??  Not really sure as I don't know enough about the messaging code.    Basically, this is a real race condition. We've not detected it before because of the other issues (which are largely fixed in this MDL).  """
"MDL-66625","2019/09/09 02:15:04","2.0","914.0","""Private replies should be included in the forum summary report""","""We currently blanket ignore private replies. We will need to consider them at some point"""
"MDL-66627","2019/09/09 03:56:09","2.0","214.0","""Add behat tests to forum summary report skeleton""","""Add behat testing to the forum summary report basic functionality, including:  # Unable to navigate to the report as a student.  # Able to navigate to the report as as a student who has only the view permission, and only able to see own row.  # Able to navigate to the report as a teacher.  # Able to view correct columns and data as a teacher."""
"MDL-66695","2019/09/17 05:18:33","3.0","240.0","""Add column to show post view count, if information is available""","""Add a column to the forum summary report to show """"Number of views"""", the number of posts each user has viewed.    This will probably require checking log entries to determine a user's read count, which would mean the column should only be shown if the site is using an internal log store. An example of similar log checking and data calculation can be seen in [this report|https://github.com/moodle/moodle/blob/master/report/log/locallib.php#L116-L146]."""
"MDL-66768","2019/09/25 09:23:27","2.0","615.0","""Add the ability to download the forum summary report""","""Add the ability to download a copy of the current forum summary report.    The report utilises Table SQL, so most of the functionality needed should already be provided by that."""
"MDL-66808","2019/10/01 05:22:47","1.0","441.0","""Forum export options for human-readable dates and removing HTML""","""We need options to:  # export raw HTML or pass it through html2text  # have dates as """"Human-readable""""    """
"MDL-67165","2019/11/07 08:51:53","5.0","963.0","""Improve the user grade display modal""","""Once we get the core functionality of displaying user grades into core we should have UX run through it and provide us with some designs."""
"MDL-67179","2019/11/08 05:02:40","1.0","31.0","""Add missing svg and png backups for i/grading icon""","""I added a new icon for grading in MDL-66893 but forgot to add the SVG and PNG backups (whoops!) so we need to add those."""
"MDL-67233","2019/11/13 05:26:48","1.0","463.0","""Choices with only open dates in the future do not appear on timeline""","""If you have a choice with only an open date in the future, this does not then appear in the timeline block    The issue is with the event_list.js:270 which filters out the 'Choice open' event being sent down regardless of whether it's in the future or not"""
"MDL-67262","2019/11/14 22:57:30","3.0","4421.0","""Add admin page for recommending activities""","""Related user stories:  ||User stories||Approaches||  |As an admin, I can set recommended elements to users(teachers/managers)|Site Admin setting page with the list of all activities. Any activity that is present on the page should have the ability to be recommended.|    h3.Acceptance criteria    * A settings page in Site administration menu should be available which allows the administrator to select any activity as recommended. Barbara to confirm where to place this in the admin tree.  * The administrator can also remove the recommendation for activities from the activity chooser from the settings page.  * H5P installation of activities to be dealt with in a different issue.   * behat tests for recommending activities on the admin page.  * Unit tests for any functions methods created through this issue.  * Use the favourites API to store this information."""
"MDL-67286","2019/11/18 03:11:21","1.0","20.0","""Create unit tests for the base activity chooser - Sub task of MDL-67264""","""Create unit tests to cover the functionality of the new code for the base level activity chooser."""
"MDL-67287","2019/11/18 03:12:28","5.0","648.0","""Create behat tests for the base activity chooser - Sub task of MDL-67264""","""Create behat tests to cover all features of the activity chooser.  Acceptance criteria:  * Existing tests passing  * New sliding functionality covered (to description, back from it, adding a new mod from description)"""
"MDL-67288","2019/11/18 03:17:41","5.0","487.0","""Accessibility implementation & audit of activity chooser - Sub task of MDL-67264""","""Review the new Activity picker and make sure that it works with:   * JAWS   * NVDA    Acceptance criteria:  * Focus lock  * Tabbing from inside a grid item goes to exit once done rather than the next or previous   """
"MDL-67291","2019/11/18 05:06:55","3.0","360.0","""Create backend code to retrieve activities - Sub task of MDL-67264""","""Create backend code to query all installed activities, checking for visibility, and returning a list / object / whatever of activities to display in the activity chooser.    *Note* There should already be code existing for the current activity picker. Investigate that code. It's likely that we won't need to initially touch it and just update the frontend. Current code for retrieving activities is in course/renderer.php - course_section_add_cm_control()    *Note 2* course/lib.php get_module_metadata() does a component callback for 'get_shortcuts' which is what adds more activities to the activity chooser.    *24/11/19* It has been decided today to retool this MDL to test out the performance of webservice call to fetch the course modules and move away using the json_encode method."""
"MDL-67371","2019/11/26 19:48:11","1.0","455.0","""Upgrade ADODB to latest version""","""AdoDB (/lib/adodb/) 5.20.14 --> 5.20.15: http://adodb.sourceforge.net/"""
"MDL-67373","2019/11/26 19:53:48","1.0","220.0","""Upgrade PHPMailer to latest version""","""PHPMailer (/lib/phpmailer/) 6.0.7 --> 6.1.3: [https://github.com/PHPMailer/PHPMailer/releases]    """
"MDL-67374","2019/11/26 19:56:00","1.0","355.0","""Upgrade SimplePie to latest version""","""SimplePie (/lib/simplepie/) 1.5.2 --> 1.5.3: [https://github.com/simplepie/simplepie/releases]    """
"MDL-67379","2019/11/26 20:04:58","1.0","200.0","""Upgrade SCSSPHP to latest version""","""scssphp (/lib/scssphp) 1.0.2 --> 1.0.6: [https://github.com/scssphp/scssphp]    """
"MDL-67381","2019/11/26 20:10:19","4.0","545.0","""Upgrade WebRTC to latest version""","""WebRTC adapter (/lib/amd/src/adapter.js) 6.4.0 --> 7.3.0: [https://github.com/webrtc/adapter/releases]    """
"MDL-67383","2019/11/26 20:15:47","1.0","620.0","""Upgrade VideoJS to latest version""","""* VideoJS (/media/player/videojs/amd/src/video-lazy.js) 7.6.5 --> 7.7.6: [https://github.com/videojs/video.js/releases]   * VideoJS  (/media/player/videojs/amd/src/video-lazy.js) 7.6.5 --> 7.7.6: [https://github.com/videojs/video.js/releases]   * VideoJS support files (/media/player/videojs/videojs/) 7.6.5 --> 7.7.6: [https://github.com/videojs/video.js/releases]   * The Flash tech for video.js (/media/player/videojs/amd/src/videojs-flash-lazy.js) 2.2.0 --> 2.2.1: [https://github.com/videojs/videojs-flash]   * Custom Flash Player for VideoJS (/media/player/videojs/video-js.swf) 5.4.1 --> 5.4.2: [https://github.com/videojs/video-js-swf/releases] """
"MDL-67385","2019/11/26 20:19:54","1.0","395.0","""Upgrade MongoDB PHP Library to latest version""","""MongoDB PHP Library (/cache/stores/mongodb/MongoDB/) 1.4.2 --> 1.5.1: [https://github.com/mongodb/mongo-php-library/releases]     *Note: This upgrade, upgrades the mongodb extension requirement to 1.6.0*"""
"MDL-67388","2019/11/26 20:25:34","2.0","375.0","""Upgrade babel-polyfill to latest version""","""babel-polyfill (/lib/babel-polyfill) 6.26.0 --> 7.7.0: [https://babeljs.io/docs/en/babel-polyfill.html] """
"MDL-67392","2019/11/27 09:27:40","1.0","221.0","""Forum information about timed discussion doesn't handle correctly """"displaystartdate"""" and """"displayenddate"""" containing quotes""","""MDL-66481 introduced showing a """"Timed"""" label next to timed discussions.    But if """"displaystartdate"""" or """"displayenddate"""" contains quote (it's the case at least for french), the """"Timed"""" label is broken.    You can look at the discussion [https://moodle.org/mod/forum/discuss.php?d=393804] for details.    To replicate :   # create in a forum a timed discussion (tick display start and end dates)   # verify that forum list of discussions well shows the """"Timed"""" label   # make a language customisation of """"Forum"""" component, and modify """"displaystartdate"""" with """"It's display start: \{$a}."""" and """"displayenddate"""" to """"It's display end: \{$a}."""" and save modifications   # verify again forum list of discussions. It should still well show the """"Timed"""" label, but it's not the case     """
"MDL-67477","2019/12/09 05:16:16","3.0","60.0","""CLONE - Remove old class renames""","""core_component looks for COMPONENT/db/renamedclasses.php files, it allows us to avoid traumatic transitions and BC breakages by listing classes that have been removed.    We need to clean the list at some point."""
"MDL-67585","2019/12/27 03:24:42","3.0","6210.0","""New API for extending the activity chooser and implementation of favouriting""","""Backend implementation of favouriting for the activity chooser.     Add unit tests to prove that this is working as intended.    Add favourites to webservice displaying the chooser  Add webservice for adding a favourite.  Add webservice for removing a favourite."""
"MDL-67586","2019/12/27 05:33:21","3.0","260.0","""Update activity chooser to include recommended activities (Frontend)""","""Add templates / JS (ES6) to the activity chooser to display recommended activities.    Related user stories:  ||User stories||Approaches||  |As a teacher, I can see a list of recommended elements in the modal|Recommended activities are displayed in the appropriate tab.|    * If there are no activities selected to be recommended, then the recommended tab is not shown.  * If there is no favourites tab being shown then the recommended tab should be shown. If there are no recommendations then the activity tab should be shown on display.  * Behat tests to cover the features mentioned above.  * Includes webservice call /modification.  * Also requires updated to webservice unit test."""
"MDL-67587","2019/12/27 05:42:56","1.0","418.0","""Add searching of the recommended activities admin page""","""Add the ability to search through all of the activities on the recommended activities admin page to narrow it down to a reasonable number, we will have thousands of entries on this page."""
"MDL-67594","2019/12/31 06:10:04","3.0","370.0","""Deprecate supports_recursion() & extend_lock() in the Lock API""","""If a lock type supports_recursion() then the locks behave very differently to when they don't.    Yet despite this not a single place in core actually calls for supports_recursion(), and if it did then it would have to do a code fork to work around the different behaviors. This feels like an architectural mistake in the design of the lock api, all lock implementations should behave identically so that calling code doesn't need to worry about things like this.    Given that the only place that leverages this is the unit tests, it is clear no one wants or needs it or is using this. I've had a bit of a quick search on github and in the wild for 3rd party uses and couldn't find any.    It's also trivial to workaround in the lock types that do support recursion to bring their behavior back in line to the locks which don't, as they already internally store a list of open locks for the current request and could just reject the second lock attempt."""
"MDL-67620","2020/01/06 02:42:45","1.0","23.0","""Course with LTI components throws error""","""If you have LTI components defined in the course, the course_module_chooser_exporter throws a 'Exception - Call to a member function out() on string' error when the editing is enabled. """
"MDL-67663","2020/01/10 17:11:01","1.0","2537.0","""Forum grading submit grade form does not conform to accessibility guidelines""","""* Navigate to the """"Grade Users"""" UI for a forum post   * Input a grade in the """"Grade"""" field   * Navigate back to the """"Next"""" link and click   * A screen reader perceivable message """"Grade saved for ..."""" is presented.         The accessibility and usability issues here can be parsed in a few ways:   * That the """"Next"""" element is marked up as a link doesn't conform to [WCAG 2.1 4.1.2|https://www.w3.org/WAI/WCAG21/Understanding/name-role-value] because, when data is present, it functions as a submit button. Users do not typically expect clicking a link to submit data. (There is arguably no 4.1.2 issue if there is no data in the """"Grade"""" field, because it is functioning as a link.)   * You could view the same issue as a [WCAG 2.1 1.3.1|https://www.w3.org/WAI/WCAG21/Understanding/info-and-relationships] nonconformance, since the relationship between the navigation and the form is not clear, and submitting data by not clicking a link is not semantics. (WCAG 1.3.1 generally hopes for valid semantics.)   * Since there are no instructions indicating that the way to submit the data is by clicking the link, the interaction does not really conform with the spirit of [WCAG 2.1 3.3.2|https://www.w3.org/WAI/WCAG21/Understanding/labels-or-instructions], which expects helpful instructions for forms.   * While the grade submitted status message is perceivable by screen readers, the is no indication that the student presented has updated (that the link has taken the user to a new student.) The new student's name and the """"X out of Y"""" change in context are not updated. so this does't conform to [WCAG 2.1 4.1.3|https://www.w3.org/WAI/WCAG21/Understanding/status-messages]. To demonstrate this, click the """"Next"""" button without data entered into the grade field. No status message is presented to the user even though the student displayed has been updated.   * Though not a strict accessibility nonconformance but a usability concern: when clicking the """"Next"""" or """"Previous"""" button, focus remains on the link, which may suggest to a screen reader user that nothing has changed when clicking it, especially when there is no status message. Moving focus to, say, the users name may help indicate to the user that clicking a link has in fact navigated to a new resource.   * Typically, in forms, submit buttons occur at the end of the form. Since the """"Next / Previous"""" buttons appear at the top of the form, and no explicit submit button is present, and no instructions are present, a user may be confused how to submit the form information. It can also be cumbersome to navigate to the end of the form to submit data, and then navigate back through the form to find the submit button.    I'm not sure whether these would be usability issues without testing with users with disabilities, and if they have said they have no issue with the UI, that's great. But if usability testing hasn't done, the overall interaction might be a candidate for testing and redesign.    In the mean time, adding instructions that clicking the Next button will submit data, if any data is present, and providing status updates that the UI has navigated to a new student, would present immediate accessibility improvements."""
"MDL-67812","2020/01/25 09:42:40","3.0","4650.0","""Create a new repository for the content bank""","""*As a teacher*   *I want* to select from the file picker the H5P content created in the Content bank   *So that* I can reuse it easily everywhere (activities, resources...).  h3. Acceptance criteria:   * Create a new repository for users to be able to select and reuse content uploaded/created in the Content bank.   * Show the content in the content bank inside the file picker.   * Select content from this repository and attach it everywhere where the file picker is displayed.    h3. List of tasks:   * Create new repository_contentbank plugin skeleton   * Adapt or create DB tables as needed   * Create capabilities   * Implement the Privacy API or implement a null privacy provider and create a new issue   * Create a view for the content bank to be shown inside the repository_contentbank"""
"MDL-67813","2020/01/25 09:57:52","3.0","2462.0","""Implement search functionality for the repository_contentbank""","""*As a teacher*  *I want* to be able to search in the content bank repository by content's name  *So that* I can find the content I need to select in the file picker  h3. Acceptance criteria:   * Be able to search content by name in the content bank repository   * Reset search criteria to see all content in the content bank repository    h3. List of tasks:   * Implement needed methods or functions to search in the content bank repository.   * Design and implement search results view.   * Reset the search criteria in order to go back to 'see all' view."""
"MDL-67884","2020/02/06 00:54:16","1.0","5902.0","""Add links to MoodleNet in Moodle (master)""","""The desire is to guide users to MoodleNet via the activity chooser. The following users stories outline the areas to introduce these links.  ||User story||Approach||  |As a teacher (in Moodle) I can navigate to MoodleNet from the Activity Chooser, so I can find content for my course|See UX designs - there is a link in the footer, as well as another carousel pane, depending on whether the user has added a MoodleNet account on their profile or not.|  |-As a teacher (in Moodle) I can navigate to MoodleNet from an empty course page, so I can find content for my course-|-On a blank course page I am presented with:-   -Description of what I can find on MoodleNet, and that I will be directed out of the Moodle site-   -A link to MoodleNet-|  |-As a teacher (in Moodle) I can navigate to MoodleNet from the course gear menu, so I can find content for my course-|-The course gear menu has an item that links to MoodleNet-|  |-As a teacher (in Moodle) I can enter my MoodleNet profile URL on my profile page, so people can find my MoodleNet profile page from Moodle-   Handled in MDL-67885.|-An editable field for MoodleNet profile URL on the Moodle profile page-   -A link to the MoodleNet profile-   -MoodleNet instance URL to be derived from the profile URL-|  h3. Acceptance Criteria:   * There should be an admin setting (in adv features for now) """"Enable MoodleNet integration"""", defaulting to enabled.   * When the integration is enabled, there should be an image link in the footer of the activity chooser as per the mockups.   ** If the tool_moodlenet plugin is uninstalled (a possibility), then the link should just be a link to the MoodleNet site (checking the user's profile for a site as needed). This WILL NOT call the MoodleNet endpoint.   ** If the tool_moodlenet plugin is installed and the user DOES NOT HAVE a saved MoodleNet profile URL in their user profile, then the link will trigger a load of the MoodleNet selection pane in the chooser - as per UX mocks.   *** If a user enters a profile URL at this step, this is saved to their profile and this pane should not be seen again (again, as per UX mocks).   ** If the tool_moodlenet plugin is installed and the user DOES HAVE a saved MoodleNet profile URL in their user profile, then the link will be to the MoodleNet endpoint and will include the params:   *** The Moodle site URL (e.g. my.moodle.org)   *** The Moodle endpoint path (admin/tool/moodlenetendpoint.php)   * When the integration is disabled, there should be no link in the activity chooser footer."""
"MDL-67885","2020/02/06 01:22:59","3.0","3061.0","""Add MoodleNet profile information into the user table / object / profile""","""||User story||Approach||  |As a user I can add my MoodleNet profile details to my user profile|When creating or updating a user, there is a field for a link to the user's MoodleNet profile.|   * This is used to redirect the user to that profile when leaving Moodle to MoodleNet."""
"MDL-67888","2020/02/06 02:32:36","3.0","2401.0","""Handling Moodle course backup files from MoodleNet (tool_moodlenet all versions)""","""This issue deals with MoodleNet resources which are Moodle course backups only. MDL-68094 deals with activity backups and is a follow on from this issue.    If, once the user has clicked 'Send to Moodle' in MoodleNet, the file is detected as an MBZ file, the user is presented with a plugin page, asking the user to confirm their intent to restore the course backup file into Moodle (see mocks for look and feel of this page). Options to 'Cancel and go back' and 'Restore' are presented.    If the user confirms the restore, the file should be downloaded by Moodle, and the user should be taken to the Step 1 of the restore process. They can then continue to restore the course as per the normal restore process. Downloading of the file into the relevant file area is handled by MDL-68132 and is a precursor to this issue.    If the user cancels the restore, then they are redirected back to the referring page on MoodleNet.    The acceptance criteria for this issue is as follows:   # The decision page should be presented to the user when both of the following are true:   -- MoodleNet posts to import.php AND   -- The file is an MBZ file.   # The look and feel of the decision page matches the mocks. This is a page, not a modal.   # If accepted, the restore can be completed in full and a new course is created.   # If cancelled, the user is sent back to dashboard.   # If the user isn't logged in to Moodle, and they decide to cancel and go back, this also needs to take them back to dashboard. I.e. the 'Cancel' aspect must work through the login process."""
"MDL-67889","2020/02/06 02:36:26","5.0","4802.0","""Mirror drag and drop options when importing a resource from MoodleNet (tool_moodlenet all versions)""","""Once we have received POST data from MoodleNet for a file that is not a backup, we eventually (depending on whether or not we  have the course/section or need to prompt the user for it - but that's another issue) need to present options to the user, asking them what module they'd like to use to handle the file import. We want to provide the same options that are presented during a drag and drop addition to a course. Drag and drop is handled by course module callbacks, specific to drag and drop. The objective here is to make use of that existing set of callbacks and present those same options to users conducting an import from MoodleNet into Moodle. Some notes on the way this works:   # Moodle determines what actions are most suitable based on the type of file. Use the \{mod_plugin}_dndupload_register() and \{mod_plugin}_dndupload_handle() for each module to put their hand up to say they handle a certain type of file.    So, what we want here is as follows:   # A plugin page which presents a list of options to the user, based on the dnd hooks.   # The page assumes the course and section have already been passed in (params to the page). E.g. In the workflow where the user starts in Moodle, MoodleNet POSTS back the course and section information to the import.php endpoint, so we have this already.   # If the page does not have a valid course and section, show an error.   # Once selected, the file should be downloaded (see MDL-68132) and then handed over to \{mod_plugin}_dndupload_handle() which will create the relevant content in the course.   # Once content is created (as above step), the user should be redirected to the course home page + section.   # This issue IS NOT scoped with creation of any course or section selection pages."""
"MDL-67900","2020/02/07 04:40:06","1.0","30.0","""Drag and drop info texts should mention that the question types are not accessible to visually impaired users""","""h5. Issue    It has been decided that drag and drop questions are not meant to be accessible. We decided to expand the description of these questions to remind teachers about this when they are creating questions.   * -These question types are solely reliant on visual location to provide an answer:-   ** -Drag and drop onto image question type-   ** -Drag and drop marker question type-   * -There is an image of text present with insufficient alt text. See screenshot-1.-    h5. Affected guidelines  h6. A   * *Sensory Characteristics:*   *1.3.3* Instructions provided for understanding and operating content do not rely solely on sensory characteristics of components such as shape, size, visual location, orientation, or sound.    h6. AA   * *Images of Text:*   *1.4.5* If the technologies being used can achieve the visual presentation, text is used to convey information rather than images of text except for the following:   ** *Customizable:* The image of text can be visually customized to the user's requirements;   ** *Essential:* A particular presentation of text is essential to the information being conveyed.   * Note: Logotypes (text that is part of a logo or brand name) are considered essential.    h6. AAA   * *Images of Text (No Exception):*   *1.4.9* Images of text are only used for pure decoration or where a particular presentation of text is essential to the information being conveyed.    Note: Logotypes (text that is part of a logo or brand name) are considered essential.    h5. Affected browsers:   * All"""
"MDL-67901","2020/02/07 05:08:47","2.0","801.0","""No label for clear my choice option on multiple-choice questions""","""h5. Issue   * No label for clear my choice   * 2 errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See screenshot-2.    h5. Affected guidelines:  h6. A   * *Info and Relationships:*   *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   * *Labels or instructions:*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.   Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h5. Affected browsers:   * All"""
"MDL-67913","2020/02/10 02:12:38","4.0","3808.0","""Update table_sql to support a generic web service""","""Currently table_sql and its derivatives are entirely configured via their constructor and one-off endpoints (e.g. /user/index.php).    I am proposing the following changes:  # Update {{lib/components.json}} to define the existing {{""""table""""}} subsystem in """"{{lib\/table}}""""  # create a new interface {{\core_table\dynamic}} (or similar) in {{lib/table/classes/dynamic.php}}. Can be initially empty while we work the full details out  # have our existing user class implement the new interface ({{\core_user\participants_table}})  # move all logic from the current constructor of the participants table to the new argument processing system, and update the calls to it in {{user/index.php}}  # create a new web service to fetch a table_sql view;    h3. Interface and implementation in participants table  # Will need functions including:  ## {{get_unique_id_from_argument(string $argument): string;}} (discussed below);  ## {{get_base_url(): \moodle_url;}}  ## {{process_arguments(?): void}}    h3. Webservice  # Will have a WS name like '{{core_table_dynamic}}' and be located in {{\core\table\external\dynamic}} ({{lib/table/classes/external/dynamic.php}})  # Should take arguments:  ## {{handler}} - the auto-loadable class name of a class extending {{table_sql}} and implementing {{\core_table\dynamic}}  ## {{uniqueid}} - the unique id of the table:  ### This is typically done in the class extending {{table_sql}}. e.g in {{\core_user\participants_table}} we call {{parent::__construct('user-index-participants-' . $courseid)}} - so the unique id is {{user-index-participants-[\d+]}}  ### We may wish to create a static function on the interface + implementation like {{get_unique_id_from_argument(string $argument): string;}}  ### We can then create an implementation in the participants table like:  {code}  public static function get_unique_id_from_argument(string $argument): string {      return """"user-index-participants-{$argument}"""";  }  {code}  And in our WS we can use it like:  {code}  if (!class_exists($handler) || !is_subclass_of($handler, \core_table\dynamic::class)) {     throw new \Exception('Not supported');  }  $instance = new $handler($handler::get_unique_id_from_argument($uniqueid));  {code}  ## {{filters}} - the list of filters to the table. This is essentially the extra arguments currently provided to the constructor.  ### We probably want to make this a list of key/value pairs _or_ a JSON string that we can decode and pass to the instantiated class  # We will return:  ## list of data attributes which correlates to the input received  ## Raw HTML raw  ### In future we will update the {{table_sql}} and {{flexible_table}} classes to make use of a set of templates, and we can then return the template name, and a data structure"""
"MDL-67914","2020/02/10 02:23:59","5.0","2022.0","""Update table_sql to support dynamic sorting""","""This is the first logical step after moving table_sql to have a generic web service.    This is likely the smallest possible change that we can make    We will need to:  # add new arguments to the web service:  ## {{sortby}} ({{string}}) A string describing the name of a sortable column  ## {{sortdir}} ({{int}}) The sort direction to use when sorting that column  # write a new set of AMD modules to handle capture of the sorting  # update our output of the table to instantiate our new JS    h3. JS  Root path: lib/table/amd/src  General structure:  {code}  dynamic.js  local/dynamic/repository.js  local/dynamic/selectors.js  local/dynamic/events.js  {code}    Need to create a {{setup()}} function which listens on the outer-most element for the table (ideally a new {{<div>}} which the table is placed in.  We can keep any arguments in data-attributes on that div  We look for any clicks on any of the sort buttons and intercept  Call the WS and replace the {{<table>}} tag with the new one"""
"MDL-67917","2020/02/10 03:54:24","1.0","6006.0","""Create a single filter for tables and the AMD structure behind this""","""The following is an approximation of the filter language used:    {code}  filterset       = jointtype (filter *("""", """" filter))  jointype        = """"All"""" / """"Any"""" / """"None""""  filter          = ([jointype] filterthing ?= filtervalues)  filterthing     = """"Group"""" / """"Role"""" / """"Keyword"""" / ...  filtervalues    = filtervalue *("""","""" filtervalue)  filtervalue     = quoted-string  {code}    The initial part of the project will be to create a single {{filter}}. That is to say:  # A dropdown to select a pre-defined enumerated list for the Join Type (All, Any, None) for the current filter  # A dropdown to select a pre-defined enumerated list for the filterthing (Group, Role, etc.) for the current filter  # A way to select the values    For the initial work:  # we will only be creating a working interface, it will not have any effect on the data. Purely visual.  # I would advise chosing Status as this is a simple, enumerated list, with static values and low complexity;  # We will only create the initial {{filter}}. Not a full {{filterset}}    The follow-on work will then comprise of:  # Adding the remaining enumerated types (Groups, Roles, Enrolment methods)  # combining multiple filters into a {{filterset}}  # Adding the date since type. This is a _single_ value filter ([number] days) and no jointype  # Adding support for non-enumerated types (date since, keyword)    The initial work will _not_ be plumbed in. It will be an isolated interface until the backend is ready to receive it."""
"MDL-67924","2020/02/11 00:47:38","1.0","746.0","""Move turn editing on button out of the edit menu on boost""","""Move the turn editing on button (on a course page) out of the edit menu and immediately visible. Please see the screen shot for what this should look like"""
"MDL-67943","2020/02/12 09:25:12","3.0","650.0","""Update windows timezone list in core_date""","""*GENERAL NOTE*: If the supported PHP versions were shipped with an older IANA timezone database version at some point, please use the timezone list from the older tz database version. For example, assuming the current supported PHP versions are 7.2, 7.3 and 7.4, and the current tz databse version is _2020a._ As the tz databse version 2020a was released on 23/04/2020, at some point 7.2, 7.3 and 7.4 (prior to 7.4.6) were shipped with the older tz database version. These sites will not have (support) the latest timezone changes from _2020a_ (timezone renaming, deprecation, etc.) and therefore, we should not use or map them in _$badzones_ or deprecate the old timezone strings.      *INSTRUCTIONS*    *PART 1*. Ensure that each windows timezone ([https://support.microsoft.com/en-us/help/973627/microsoft-time-zone-index-values]) exist in _$badzones_ (_lib/classes/date.php_) and have a mapping to current good (canonical) IANA timezone from the IANA timezone information database ([https://data.iana.org/time-zones/]). Please see *GENERAL NOTE* to determine which timezone database version should be used.    Also, ensure that all good IANA timezones have translations.    Resources that could help finding the equivalence between the Windows and the IANA timezones:   * [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones]   * [https://github.com/unicode-org/cldr/blob/master/common/supplemental/windowsZones.xml]    *PART 2*. Ensure that old IANA timezones are not being used as target in the mapping in _$badzones_ (_lib/classes/date.php_). Every old IANA timezone used should be replaced with the good (canonical) IANA timezone. Please see *GENERAL NOTE* to determine which timezone database version should be used to find the old timezones.    Resources that could help finding the IANA timezone changes:   * [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones]   * [https://data.iana.org/time-zones/tzdb-2020a/backward] (replace """"tzdb-2020a"""" if a different tz database version is required**)    *PART 3:* Ensure that there is a mapping between every old timezone and new timezone name in _$badzones_ (_lib/classes/date.php_). Please see *GENERAL NOTE* to determine which timezone database version should be used to find the old timezones.    Additional resources that could help finding the IANA timezone name changes:   * [https://www.php.net/manual/en/timezones.others.php]   * [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones]   * [https://data.iana.org/time-zones/tzdb-2020a/backward] (replace """"tzdb-2020a"""" if a different tz database version is required**)    According to [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones] the old timezone names are either deprecated or they are considered to be an alias to the good (canonical) timezone name.    For a clearer distinction, add the mappings for the deprecated timezones under the """"_A lot more bad legacy (deprecated) time zones._"""" section in _$badzones_ (lib/classes/date.php), while the aliases under """"_Link old timezone names with their new names._""""    NOTE: The general purpose of *PART 3* is to provide automatic timezone name changes, so when a calendar event or a user comes with Asia/Calcutta, the event or user is changed to Asia/Kolkata (or whatever is the new timezone name is). Also, in the future this can be expanded (in followups) for user edit and user upload.    *PART 4:* Deprecate and remove the existing translations (_lang/en/timezones.php_) of the old IANA timezones. Please see *GENERAL NOTE* to determine which timezone translations are safe to be deprecated and removed.    ------------------------     For the testing instructions you can manually edit the .ics file from the cloned issue:   # Open the .ics file using a text editor.   # Replace the timezone ID there (i.e. """"U.S. Mountain Standard Time"""") to one of the new ones added.   # Replace the time entries (i.e. """"202001"""" (2020 is the year and 01 the month) to a more recent date).    ------------------------    _Please create a clone of this issue for next version before closing this_"""
"MDL-67969","2020/02/14 12:54:37","2.0","275.0","""Calendar: View event details: Accessibility issues""","""h5. Issues  h6. A   * 2 errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See [^Fig. 1.01.png] and [^Fig. 4.03.png]    h5. Affected guidelines  h6. A   * *Parsing:*  *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features. Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete."""
"MDL-68019","2020/02/21 03:34:22","1.0","387.0","""Improve favourites performance for the activity chooser""","""There are 2 parts to this:    The first, is an addition to the existing API, to address a situation encountered in MDL-67585. This situation is when a component wishes to store favourites for an area using multiple different itemtype strings. In such a case, we'd like to be able to get the favourites for all the item types at once - at present, this must be done via multiple API calls to find_favourites_by_type.    The second is to update the calling code in content_item_readonly_repository, to use the single new API call instead of several calls in a loop (the current situation).     """
"MDL-68030","2020/02/24 05:33:26","3.0","345.0","""Finalise the final layout of various Activity chooser elements""","""During the development of the activity chooser we have been focused on the functionality of the chooser and eye balling the designs.    Here, we want to ensure we match the designs and handle any unexpected cases in the designs and make sure we handle the responsiveness of the modal and items within it.    I can foresee some changes will have to be made as the original design had a reduced number of activities than we have in core so either scrolling or a larger modal will have to be used.    Link to invisio [here|https://projects.invisionapp.com/share/49UI6T8R2AK#/screens/388682476]"""
"MDL-68051","2020/02/25 15:49:20","1.0","660.0","""Some more accessibility issues for the tabs and tab panels in the revamped activity chooser""","""Seems like we missed some items about the accessibility of the tabs for the activity chooser.  h5. Switching tabs    The keyboard navigation between the tabs and their respective tab panels seem to be broken after switching between tabs. To reproduce:   #    ## Switch to another tab using the keyboard.   ## Press tab again. Expected behaviour:  {noformat}When the tab list contains the focus, moves focus to the next element in the tab sequence, which is the tabpanel element.  {noformat}  However, the focus does not move to the tab panel.    h5. Number of tabs   # Even when the Favourites or Recommended tabs are hidden, the screen reader keeps announcing that there are 3 tabs on the list. This will be confusing to the user.    h5. Axe   # Axe is reporting the following violation about the tab list:  {noformat}<li> elements must be contained in a <ul> or <ol>    Issue description: Ensures <li> elements are used semantically    Impact: serious    Element location  #activities-5 > .nav-item:nth-child(1)    Element source  <li class=""""nav-item"""">    To solve this violation, you need to:  Fix the following:  List item does not have a <ul>, <ol> without a role, or a role=""""list"""" parent element  {noformat}  Perhaps we can render the tab list as not an unordered list, similar to [https://www.w3.org/TR/wai-aria-practices/examples/tabs/tabs-2/tabs.html?]    h5. Tabs keyboard navigation   #  Tabs keyboard navigation is not working in certain browsers (ex. Firefox).   This is due to the usages of 'e.srcElement' which is not supported in every browser.      """
"MDL-68055","2020/02/26 01:50:34","1.0","82.0","""Module description text not formatted during export""","""This needs to be handled as FORMAT_MARKDOWN via format_text in the exporter."""
"MDL-68056","2020/02/26 05:48:10","3.0","464.0","""Improve performance of course_section_add_cm_control()""","""This method is called once per course section and currently handles a few cases:   # If $THEME->enablecourseajax == true AND $course->id == $this->page->course->id AND $usermodchooser == true (a user pref), then display the """"Add an activity or resource"""" link allowing the chooser modal to be opened.   # If $THEME->enablecourseajax == true AND $course->id == $this->page->course->id AND $usermodchooser == false (a user pref), then display fallback 1 - a control including two lists of resources and activities which, when selected, take the user to the creation page for that module.   # If $THEME->enablecourseajax == true AND $course->id != $this->page->course->id, then display fallback 1 - a control including two lists of resources and activities, which, when selected, take the user to the creation page for that module.   # If $THEME->enablecourseajax == false, then display fallback 1 - a control including two lists of resources and activities which, when selected, take the user to the creation page for that module.   # If JS is disabled in the browser (not a case we support any more), then fallback 2 is shown - a control including the same two lists of resources and activities plus a 'Go' submit button. The user needs to select the activity/resource and then click 'Go' in this fallback case.    Fallback 1 and 2 are handled by the same code - it's just that when loaded in a browser without js enabled, the 'Go' button is shown (it's inside a <noscript> tag)    The way this method is currently structured is such that we always generate the fallback control HTML. I.e. every time this method is called, which is once per course section, this is created. Then, if the theme supports course ajax (provided the course also matches the page course, as above), then we wrap that entire fallback HTML inside <noscript> tags and append the link control to the output string before returning.    I think we can clean this up. We don't have any obligation to support the """"I disabled JS in my browser"""" case as we have been JS dependent for some time now. We should therefore be able to do one of two things depending only on the courseajax support:   # Render fallback control 1 in cases where:   -- The theme sets $THEME->enablecourseajax to false or;   -- $THEME->enablecourseajax is true but course doesn't match the this->page->course or;   -- The user has disabled the modchooser in their user prefs.   -- We're running in Behat, since many behat setup steps expect the step _I add a """"x"""" to section """"y"""" and I fill the form with_ to work without JS.   # Render the link control in cases where the $THEME->enablecourseajax is true and the course matches the $this->page->course and the user preference allows for the chooser.    This would mean we're likely going to reduce DB calls, and reduce the volume of code we're running on every course home load - when editing is enabled, of course."""
"MDL-68076","2020/02/27 21:07:43","5.0","9266.0","""Create """"Feedback"""" link in Moodle to permanent survey site""","""To facilitate data collection from as broad a sample of Moodle users as possible, we should add a link within Moodle to a permanent URL on which surveys will be placed (e.g. """"https://feedback.moodle.org"""". At minimum, this landing page will always display a simple """"NPS"""" (net promoter score) survey. The landing page may also offer other questions or links to other surveys.    I suggest that the link be implemented as an icon in the header using the """"Bullhorn"""" icon from FontAwesome, to match the """"Feedback"""" activity. The icon should appear next to the existing Messaging and Notifications icons.    Attention should be drawn to the link by incorporating a User Tour for the 3.9 release.    Roll-over of the icon should display the text """"Give feedback on Moodle LMS"""". Clicking the icon should offer a popup with a short message: """"Click here to give feedback on the Moodle LMS"""" or similar.    Site administrators should have the option of disabling the feature. Whether the feature is enabled or not should be recorded in Site Registration data.    Site administrators who have registered their Moodle site should have an option to review and retrieve responses from their site only. Additional analysis tools may follow later.    A partner portal access to review data from sites hosted by that partner is also a possible future enhancement.    In addition to taking the user to the landing page, the link should also include the following information about the user in URL parameters:   * Site URL (can be used to tie responses to a registered site)   * Site short name   * User's preferred language (used to direct to a language-specific survey, if available)   * First three octets of user's URL, for coarse geographical location (allowable within GDPR, because the last octet is omitted)   * Length of time the user's Moodle account has been active on this site   * The type of page the user was on when they clicked the icon   * Any roles the user has in the context in which they clicked the icon   * Detailed Moodle version   * Name of Moodle theme and version    This data will be collected and recorded by the landing page, along with the timestamp and responses to questions on the landing page.    User clicks on the Feedback link should be logged in Events.   * [LimeSurvey|https://limesurvey.org/]   * LimeSurvey is open source survey software built in PHP. The Community version is well suited to Moodle's needs.   * Can be hosted at feedback.moodle.org (or whatever permanent URL is desired)   * Supports many standard question types   * Can accept parameters via URL, allowing key user information to be passed from the user's Moodle site (see below). This is called the [Start URL|https://manual.limesurvey.org/URL_fields#Start_URL]   * Conditional survey questions are possible using the """"Relevance"""" feature   * Supports fully anonymized responses, but this will nullify the submission date.   * Built in [statistical reports|https://manual.limesurvey.org/Statistics] for numerical/menu questions   * Exports to many kinds of analysis software, including R, SPSS, Excel, LibreOffice, etc.   * Can present the same survey in [multiple languages|https://manual.limesurvey.org/Question_type_-_Language_switch]. LimeSurvey can attempt to pre-populate this value from the user's language preference setting in Moodle via URL parameters.   * Supports [CAPTCHA codes |https://manual.limesurvey.org/Publication_%26_access]   * Can set a cookie to prevent repeated participation, but I don't recommend this unless the survey is reset regularly, e.g. monthly. (Data could still be combined for analysis.)   * Supports [geographic location from IP address|https://manual.limesurvey.org/Global_settings#General] using IP-Info-DB service or Google Maps – the free version is accurate to the country level, so complies with GDPR but still provides useful data. Try it here: [https://ipinfodb.com/]    * Outstanding advice on [how to design a good survey|https://manual.limesurvey.org/How_to_design_a_good_survey_(guide)]    h3. How to prepopulate questions via URL:    Question responses can be pre-filled in LimeSurvey by using URL arguments. The question is identified using a [SGQA identifier|https://manual.limesurvey.org/SGQA_identifier] constructed from the survey ID, group (question group) ID, question ID, and, if relevant, choice ID. These are combined into a single parameter delimited by """"X"""", as shown below. Multiple choice question codes need to be constructed differently, using question codes instead of IDs and  """"_"""" instead of """"X"""". (Note that there is another method of prefilling using [qcode naming|https://manual.limesurvey.org/URL_fields/en#Start_URL] via [panel integration|https://manual.limesurvey.org/Panel_integration], but it only seems to work with free text questions.)  h3. Examples:    {color:#de350b}*Survey ID*: 282444{color} (this will change when survey is implemented on permanent site)    {color:#00875a}*Group ID*: 2{color} (all the optional questions are in Group 2, the mandatory NPS questions being in Group 1)  ----  *Specific questions*:         *_How long have you been using Moodle LMS?_*    {color:#4c9aff}*Question ID*: 4{color}         Question type: Single choice answer         {color:#ff8b00}*Answer Option codes:*{color}   * {color:#ff8b00}AO01{color} Less than one month   * {color:#ff8b00}AO02{color} Less than one year   * {color:#ff8b00}AO03{color} Less than 3 years   * {color:#ff8b00}AO04{color} Three years or more         To prepopulate the response """"Less than one year"""", based on the """"First access to site"""" value for the user on clicking the Feedback link, include this string in the URL:         &*{color:#de350b}282444{color}X{color:#172b4d}2{color}X4*={color:#ff8b00}*AO02*{color}  ----  *_What version of Moodle LMS are you using?_*    {color:#4c9aff}*Question ID*: 5{color}         Question type: +short free text+ (to allow multiple decimal points). Note: it is possible to use a regular expression to validate this text.         To prepopulate """"3.8dev+ (Build: 20191105)"""" from server environment:    &*{color:#de350b}282444{color}X{color:#00875a}2{color}X{color:#4c9aff}5{color}*={color:#ff8b00}*3.8dev%2B%20%28Build%3A%2020191105%29*{color}       ----  *_What mode of instruction do you use with Moodle LMS?_*    {color:#4c9aff}*Question code*: G02Q05{color} _(Note that this question type uses a different option format)_    Question type: Multiple choice answer (check all that apply)    *{color:#ff8b00}Answer Option codes{color}:*   * {color:#ff8b00}SQ01{color} Face to face   * {color:#ff8b00}SQ02{color} Fully online   * {color:#ff8b00}SQ03{color} Blended or hybrid    To prepopulate """"Face to face"""" AND """"Blended or hybrid"""" from Analytics Site Settings:    &*{color:#4c9aff}G02Q05{color}*_*{color:#ff8b00}SQ01{color}=Y*&*{color:#4c9aff}G02Q05{color}*_*{color:#ff8b00}SQ03{color}=Y*         Example:    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&G02Q05_SQ01=Y&G02Q05_SQ03=Y]  ----  *_What type of institution do you use Moodle LMS in?_*    {color:#4c9aff}*Question code*: G02Q06{color}     Question type: Multiple choice answer (check all that apply)    {color:#ff8b00}*Answer Option codes:*{color}   * {color:#ff8b00}SQ01{color} Academic   * {color:#ff8b00}SQ02{color} Corporate training   * {color:#ff8b00}SQ03{color} Non-governmental organization (NGO)         To prepopulate """"Academic"""" from Analytics Site Settings:    &{color:#4c9aff}*G02Q06*{color}_*{color:#ff8b00}SQ01{color}=Y*    [confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&G02Q06_SQ01=Y]  ----  *_What level of learning do you use Moodle LMS with?_*    *Question ID*: 6    *Question code*: G02Q07    Question type: Multiple choice answer (check all that apply)    *Answer Option codes:*   * SQ01 Early childhood education   * SQ02 Primary education   * SQ03 Lower secondary education   * SQ04 Upper secondary education   * SQ05 Post-secondary non-tertiary education (may include corporate or community/NGO training)   * SQ06 Short-cycle tertiary education (may include corporate or community/NGO training)   * SQ07 Bachelor or equivalent level   * SQ08 Master or equivalent level   * SQ09 Doctor or equivalent level         To prepopulate """"Bachelor or equivalent level"""" AND """"Master or equivalent level"""" from Analytics Site Settings:    &*G02Q07_**SQ07=Y*&*G02Q07_**SQ08=Y*    [confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&G02Q07_SQ07=Y&G02Q07_SQ08=Y]       ----  *_How do you use Moodle LMS?_*    *Question ID*: 34    {color:#4c9aff}*Question code*: G02Q08{color}    Question type: Multiple choice answer (check all that apply, *allows """"Other"""" with a short text box*)    *{color:#ff8b00}Answer Option codes{color}:*   * {color:#ff8b00}SQ01{color} Student   * {color:#ff8b00}SQ02{color} Teacher   * {color:#ff8b00}SQ03{color} Non-editing teacher   * {color:#ff8b00}SQ04{color} Course creator   * {color:#ff8b00}SQ05{color} Manager   * {color:#ff8b00}SQ06{color} Site administrator         To prepopulate """"Student"""" AND """"Teacher"""" AND """"{color:#ff8b00}Other{color}"""" and name of custom role """"{color:#403294}Pilot tester{color}"""" from user's role when they click the Feedback link:         &*{color:#4c9aff}G02Q08{color}*_*{color:#ff8b00}SQ01{color}=Y*&*{color:#4c9aff}G02Q08{color}*_*{color:#ff8b00}SQ02{color}=Y*&{color:#4c9aff}*G02Q08*{color}_*{color:#ff8b00}other{color}={color:#403294}Pilot%20tester{color}*    [confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&G02Q08_SQ01=Y&G02Q08_SQ02=Y&G02Q08_other=Pilot%20tester]         If we need to capture multiple """"other"""" roles, they can be delimited using any URL-legal character.       ----  *_What is the URL of your Moodle LMS site?_*    *Question ID*: 41     Question type: short free text. Note: it is possible to use a regular expression to validate this text.    *Including this question will allow linking the results to the site registration if the site is registered, so the site administrator can view a summary of responses.*         To prepopulate """"https://learn.moodle.net"""" from server environment:    &*282444X2X41*=*https%3A%2F%2Flearn.moodle.net*    [Confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&282444X2X41=https%3A%2F%2Flearn.moodle.net]       ----  *_In which country do you use Moodle?_*    *Question ID*: 42         Question type: short free text.     Limesurvey can automatically prepopulate the [geographic location from IP address|https://manual.limesurvey.org/Global_settings#General] using IP-Info-DB service or Google Maps – the free version is accurate to the country level, so complies with GDPR but still provides useful data. Try it here: [https://ipinfodb.com/]     This method requires registering with the IP-Info-DB service, Google Maps, or OpenStreetMaps to get an API key.    This data could also be drawn from the user's """"Country"""" value:    To prepopulate """"Canada"""" from the user's profile:    &*282444*X*2*X*42*=*Canada*    [confirmed correct]    [http://gaeacoop.org/limesurvey/index.php/282444?newtest=Y&lang=en&282444X2X42=Canada]       ----  h3. Analysis:         While LimeSurvey presents useful statistics per individual question, we need a deeper analysis of the relationships between questions and of the contents of free text responses. Data can be exported from LimeSurvey into a number of formats. From that data, I describe below how an analysis could be conducted in R. Obviously, there are many statistical software packages that could be used for this process. R is open source and has a huge support base, including many specialty packages for specific analyses. In particular, there are some highly useful text analysis tools that will be critical to extracting data from very large volumes of free text responses.        # Calculate mean and median raw NPS scores and standard deviation   # Calculate NPS using standard formula: on a 0-10 question, 0-6 are considered Detractors [-1], 7-8 are considered Passive [0], 9-10 are considered Promoter [+1]. Save this categorization per entry. Subtract the percentage of Detractors from the percentage of Promoters to determine NPS.    # Chi-Square analysis:   # determine if there are any significant roles / institution types/languages etc. that are especially happy/unhappy. This is done by using the """"promoter"""" positive value as a binary, and choosing        # Coarse region analysis based on IP address of respondents (primarily used for estimating survey coverage in this project)    There are other lexical analyses that could be performed, e.g. using Sentiment Analysis. See [https://docs.google.com/document/d/1vt8dAf9S0jaHGQdEuL-crFSDfMmTeFHXQVgeXC8D5zE] for more information."""
"MDL-68111","2020/03/05 05:30:20","1.0","56.0","""Core setting to toggle MoodleNet features globally (master)""","""Essentially just a feature toggle, but it won't be impacting anything in this issue.    Some things it will affect in future:    - The MoodleNet admin tool will check this to decide whether it permits communication to/from MoodleNet.  - The activity picker will present the link to MoodleNet in the footer if this setting is enabled.    """
"MDL-68112","2020/03/05 06:08:52","1.0","430.0","""The search icon container in the activity chooser search bar should use bootstrap classes""","""The search icon container in the activity chooser search bar should use the existing bootstrap class ('input-group-append') instead of creating a custom alternative one.    (https://tracker.moodle.org/browse/MDL-67263?focusedCommentId=785671&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-785671)"""
"MDL-68129","2020/03/09 02:43:51","1.0","551.0","""Create mod_moodlenet activity (mod_moodlenet 3.7 and 3.8)""","""This plugin is part of a set (the set also includes an admin tool, 'tool_moodlenet') to be provided, via the plugins db, to sites on versions 3.7 and 3.8 of Moodle.    Acceptance criteria:    A minimal plugin which:  # Provides an implementation of get_shortcuts(), providing one single resource called  'MoodleNet' with relevant explanatory text in the description (text TBC).  # Provides a modified edit_form.php, which just redirects to a MoodleNet url (with params) instead of loading up the normal mod edit form. This allows the chooser to present the required MoodleNet item to the users, and allows them to be sent to MoodleNet via the edit_form.php page.  # The edit_form.php page asks the tool_moodlenet plugin (part of a set) for the MoodleNet URL for a given user and uses this link in redirection.  # mod_moodlenet: Fix edit.php so it correctly uses 'section' and not 'sr' (annoyingly, section return is something else entirely).  # Passes unit tests relating to privacy and is ready for deployment to the plugins DB."""
"MDL-68130","2020/03/09 03:01:10","1.0","51.0","""Add method which returns MoodleNet link (tool_moodlenet 3.7 and 3.8)""","""On stable branches, where we provide two plugins, the mod_moodlenet plugin needs to be able to ask the tool_moodlenet plugin for the MoodleNet endpoint for a given user. The module will then redirect the user there, initiating the MoodleNet browse-and-import process.    This URL can be one of two things:   # A URL to a tool_moodlenet page asking the user to either enter their MoodleNet profile URL or proceed to the global MoodleNet instance. This page will have been created in the blocker - MDL-68134.   # A user-specific MoodleNet URL, which WILL kick off the browse-and-import process with MoodleNet. This URL is based on the value of their custom profile field 'MoodleNet profile URL' (it uses only the site portion after the '@'). This URL MUST include two params 'site' and 'path':   -- Site must be a the URL of the Moodle site, url-encoded. E.g. institution.edu.   -- Path must be the path to the MoodleNet import endpoint, including course and section params, and should also be url-encoded. E.g. admin/tool/moodlenet/import.php?course=X&section=Y)    An example of the syntax of the complete URL is:   something.moodle.net?site=ENCODEDSITE&path=ENCODEDPATH    The acceptance criteria for this task is as follows:   # The method must be callable by another plugin and should take in params 'course' and 'section'.   # The method must return the user-specific MoodleNet URL if set in the user's custom profile field. Otherwise, if not set, it must return the URL of the tool_moodlenet page allowing the user to select the MoodleNet instance to go to (this page is created in MDL-68134)."""
"MDL-68134","2020/03/09 06:18:50","5.0","2836.0","""Page for selecting which MoodleNet instance to go to (tool_moodlenet 3.7 and 3.8)""","""This view is seen in the activity chooser in master, as a pane, but must be a plugin page in Moodle 3.7 and 3.8.     The acceptance criteria for this page are as follows:  # The look and feel of the page should match the mocks, albeit as a page not a pane.  # This page does not need to be linked to from anywhere in this issue.  # Entering a profile url and saving should:  #- Validate the profile URL syntax  #- Save the profile URL into the user's 'MoodleNet profile URL' custom field  #- Redirect the user to the respective MoodleNet endpoint - there is a method to generate this endpoint - see MDL-68140."""
"MDL-68140","2020/03/10 03:20:28","3.0","316.0","""Create a method which returns a MoodleNet endpoint (tool_moodlenet all versions)""","""Several issues need a method to generate a MoodleNet endpoint URL for a given profileurl and return path.     The way this URL is created is as follows:    # Take the users MoodleNet profile URL which will be in the format """"@name@their.moodlenet.site), grabbing the site portion only.  # Assume a fixed MoodleNet path of '/endpoint' for now (this is being worked on by the MoodleNet team)  # Append the endpoint to the site URL - e.g. their.moodle.site/endpoint  # Next, we need to pass 2 params to this endpoint - site and path - which represent the site and path we want MoodleNet to send users back to, once content is selected.  #- Site: this is the Moodle site URL, urlencoded. E.g. urlencode('my.moodle.site')  #- Path: this is the path to our MoodleNet plugin import endpoint, urlencoded, and can include params itself (this is important for getting back the course and section). E.g. urlencode('admin/tool/moodlenet/import.php?course=2&section=4')  # The endpoint should now look like:  their.moodle.site/endpoint?site=ENCODEDSITE&path=ENCODEDPATHWITHPARAMS    The acceptance criteria for this issue are as follows:  # Generated URL should match the above syntax.  # Unit tests to confirm the params and can be urldecoded and match the inputs.  """
"MDL-68141","2020/03/10 05:12:56","3.0","2760.0","""Add page for selecting a course (tool_moodlenet all versions)""","""This should be in all versions of the tool in the first iteration. Later, it will be replaced in master.    The mockups are still pending for this issue, however the functional acceptance criteria is as follows:  # When receiving a POST from MoodleNet (when the user clicks the 'Send to Moodle' button in MoodleNet - use the test client!), the tool should take the user to this new course selection page ONLY if the course param IS NOT set in the request to the import URL.  E.g. 1. Data POSTed to site/admin/tool/moodlenet/import.php?course=3&section=5 will NOT take the user to this new page. This represents an import where the user started in Moodle.  E.g. 2. Data POSTed to site/admin/tool/moodlenet/import.php will take the user to this new page. This represents an import where the user started in MoodleNet.  # The page should allow a course to be clicked. Clicking a course should send the user directly to the options selection page (MDL-67889) with relevant params (see next point)   # When sending the user to the options selection page (67889), the course id should be passed in, and section 0 (the first section) should be used. There is no section selection process in the first iteration."""
"MDL-68142","2020/03/10 05:37:39","3.0","241.0","""Code to migrate the feature toggle from the plugin settings to core (tool_moodlenet master only)""","""This is required so that sites can upgrade from 3.7 or 3.8 to master and retain their feature toggle state.    The way this should work is that the plugins have a version (say 2020030500) while the master plugin will be on a higher version (say 2020031000). In the master upgrade code for the tool, we want to read the tool setting and write it to the core setting.    Acceptance criteria for this issue is as follows:   # 3.7 or 3.8 should be able to upgrade to master and the value of their feature toggle should carry over to the core setting in master.   # This should work when the toggle is true or false i.e. works regardless of state.   # Put a comment in version.php in the plugin to make sure it doesn't ever exceed a certain version number in master."""
"MDL-68147","2020/03/11 02:02:31","1.0","35.0","""Activity names on recommended activity admin page are bold""","""They don't need to be bold. Let's match what it looks like on the manage activities page.     """
"MDL-68171","2020/03/13 07:32:40","2.0","218.0","""Add the ability to set the join type between filters in the participants filter""","""Introduce the ability to join filter conditions in a filter set by """"All"""", """"Any"""" and """"None"""" join (match) types.    As shown in [this step|https://projects.invisionapp.com/share/NAVHB0RQY2X#/screens/403328876] of the Invision design."""
"MDL-68196","2020/03/18 12:54:11","1.0","718.0","""Course participants: Enrol user: Accessibility issues""","""h5. Issues  h6. A   * *(IE only issue)* When the select users dropdown menu receives focus, it automatically expands. The user is unable to close the dropdown menu which obscures the rest of the form. See Fig. 10.02   * -label. See Fig. 10.01.- --> Fixed by MDL-67968   * -Errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See Fig. 10.01.- --> addressed at MDL-68148    h6. AA   * -Colour contrast #3, #4.- --> addressed at MDL-64494    h5. Affected guidelines  h6. A   * *On Focus:*   *3.2.1* When any component receives focus, it does not initiate a change of context   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AA   * 1.4.11"""
"MDL-68200","2020/03/18 16:06:23","1.0","4036.0","""Forum: Discussion list: Accessibility issues""","""h5. Issues  h6. A   * -The links in the """"Jump to…"""" drop down are triggered when the mouse/finger is clicks/touches the element rather than when it is lifted.- --> could not reproduce on any of the supported browsers   * -Empty form labels. See Fig. 11.03- --> Fixed as part of MDL-67968   * Errors found using W3C Nu Validation Service and filtered to indicate WCAG errors only    h6. AA   * -Text breaks out of its containers when zoomed to 400%. This occurs in IE only. See Fig. 11.04- --> deferred to MDL-68249   * -Colour contrast #3, #28- --> Will be addressed on MDL-64494    h6. AAA   * Month abbreviations such as """"Jun"""", """"Feb"""" are not fully explained. Even well known abbreviations need to either be expanded on the first use on a page or that a link to a glossary or list of terms be provided    h5. Affected guidelines  h6. A   * *Pointer Cancellation:*   *2.5.2* For functionality that can be operated using a single pointer, at least one of the following is true:   No Down-Event   The down-event of the pointer is not used to execute any part of the function;   Abort or Undo   Completion of the function is on the up-event, and a mechanism is available to abort the function before completion or to undo the function after completion;   Up Reversal   The up-event reverses any outcome of the preceding down-event;   Essential   Completing the function on the down-event is essential.   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AA   * *Reflow:*   *1.4.10* Content can be presented without loss of information or functionality, and without requiring scrolling in two dimensions for:   Vertical scrolling content at a width equivalent to 320 CSS pixels;   Horizontal scrolling content at a height equivalent to 256 CSS pixels.   Except for parts of the content which require two-dimensional layout for usage or meaning.   * *Non-text Contrast:*   *1.4.11* The visual presentation of the following have a contrast ratio of at least 3:1 against adjacent color(s):   User Interface Components   Visual information required to identify user interface components and states, except for inactive components or where the appearance of the component is determined by the user agent and not modified by the author;   Graphical Objects   Parts of graphics required to understand the content, except when a particular presentation of graphics is essential to the information being conveyed.    h6. AAA   * *Abbreviations:*   *3.1.4* A mechanism for identifying the expanded form or meaning of abbreviations is available."""
"MDL-68235","2020/03/24 01:37:04","1.0","901.0","""Incorrect section used in activity creation after section drag and drop""","""We now pull this from the data attribute in the link, but this isn't updated when we move a section. We used to use the value of X in id=""""section-X"""" on the section wrapper, which was being updated on drop as part of the course format drag and drop code.    To see the problem:  1. Pull in fix from MDL-68231 first. This fixes the section drag and drop  2. Create 4 sections in a course - topics format is fine.  3. Drag section 4 onto section 3  4. Now, using section 3 add an activity    Expected: the activity is created in section 3  Actual: It's created in section 4."""
"MDL-68246","2020/03/25 08:14:02","1.0","4084.0","""Update fetching of participants to support multiple values per filter""","""Currently, fetching of participants (ie user/lib.php:function user_get_participants, user_get_total_participants and related calls) only support submitting a single value per filter type.    These need to be updated to support filtering by multiple values per filter type.    For this issue, this will be restricted to the """"Any"""" (logical OR) case."""
"MDL-68269","2020/03/26 16:32:29","1.0","70.0","""Recent changes have caused some form elements to display incorrectly""","""This is a regression apparently introduced by MDL-67968    Some change into form structure/classes (fieldsets) have caused certain elements to start displaying incorrectly.    See for example https://github.com/h5p/h5p-moodle-plugin/issues/329 where the problem has been detected.    At the time of writing this it not clear which other stuff may be broken in a similar way.    Quoting [~tusefomal]:    {quote}  I see that this element fieldset goes from flex to a regular display with this change, adding a """"w-100"""" class will increase it's compatibility with previous forms  {quote}    Ciao :-)"""
"MDL-68283","2020/03/30 05:46:41","1.0","50.0","""get_moodlenet_user_profile should handle validation exceptions""","""The user can enter in their moodlenet profile information from the user edit page which doesn't run through the same validation as the moodlenet redirect page.    In situations where the profile information is wrong when this method is called it will throw an exception. We should catch that exception and return null. That would ask the user to enter in a moodlenet profile and the proper validation can happen here.    Things to do:   # In get_moodlenet_user_profile method catch the exception and return null.   # Change the current exception thrown to a moodle_exception.   # Update the unit tests to test for an invalid username already stored.   # Both Master and stable plugin to be updated."""
"MDL-68286","2020/03/30 08:04:52","2.0","384.0","""Update table_sql to support dynamic initials bar""","""Update table_sql to support dynamic initials bar"""
"MDL-68312","2020/04/01 10:51:58","5.0","875.0","""Gradebook: Grader report: Accessibility issues""","""h5. Issues  h6. A   * Errors found using W3C Nu Validation Service and filtered to indicate WCAG errors only    h6. AAA   * -The letter links for the """"First Name"""" and """"Surname"""" searches do not make sense out of context- --> left out for now    h5. Affected guidelines  h6. A   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.    h6. AAA   * *Link Purpose (Link Only):*   *2.4.9* A mechanism is available to allow the purpose of each link to be identified from link text alone, except where the purpose of the link would be ambiguous to users in general."""
"MDL-68330","2020/04/03 04:55:17","1.0","800.0","""Video and audio is not properly rendered by videojs in the course page ""","""This issue was discovered while working on the upgrade of VideoJs to the latest version (https://tracker.moodle.org/browse/MDL-67383)    When adding a video link to a content of a label or in a description of an activity (enable to be displayed in the course page), with the media filters enabled, the video is not properly rendered.    Replication steps:   # Login as Admin.   # Create a Course.   # Enable 'Multimedia plugins' filter (Site administration > Plugins > Filters > Manage filters)   # Enable the VideoJS media player and prioritise it over the other media players (Site administration > Plugins > Media players > Manage media players)   # Go to the Course   # Add a Label in the course   ** For 'Label text' add a link to a video file (for ex. mp4)    *Expected*: The video link is displayed properly in a media player in the course page.    *Actual:* The media player with the video link is not properly displayed (See attached screenshot).    Alternatively, you can just upload the provided course backup in order to replicate the issue. """
"MDL-68343","2020/04/06 04:15:37","1.0","410.0","""Gradebook: Single view: Accessibility issues""","""h5. Issues  h6. A   * See 1.3.1 re: labels:  *Info and Relationships:*  *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.   See Fig. 17.01 and Fig. 17.02   * Error found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See Fig. 12.05    h5. Affected guidelines  h6. A   * *Labels or Instructions*  *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*  *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.   Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete."""
"MDL-68348","2020/04/06 11:45:23","4.0","6265.0","""Update the participants filter to support filtering with additional logic operators""","""Currently the participants_search class supports 'Any' type filtering (intra/inter filter joins using logical OR).    That class and related functions need to be updated to support the remaining two condition types, 'All' and 'None' (logical AND and NOT). This includes both joins within each filter, as well as the logical operators applied _between_ filters (ie the all/any/none join type set for the filterset when multiple filters are applied concurrently).    Unit tests also need to be written (or uncommented where relevant)."""
"MDL-68353","2020/04/07 02:21:34","1.0","2375.0","""Course management: Create new course: Accessibility issues""","""h5. Issues  h6. A   * A button is empty or has no value text. See Fig. 20.01   * See 1.3.1 re: labels (See Fig. 20.02 and Fig. 20.03 and Fig. 20.04):  *Info and Relationships:*  *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.    * Errors found using W3C Nu Validation Service and filtered to indicate WCAG errors only    h5. Affected guidelines  h6. A   * *Text Alternatives:*   *1.1.1* All non-text content that is presented to the user has a text alternative that serves the equivalent purpose, except for the situations listed below.   * *Labels or Instructions*   *3.3.2* Labels or instructions are provided when content requires user input   * *Parsing:*   *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.    Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete."""
"MDL-68355","2020/04/07 08:30:58","1.0","651.0","""Fix accessibility issues for the marking guide grading form in the forum grading UI""","""Axe reports 2 accessibility issues for the marking guide grading form in the forum grading UI.  # Empty button description for the criterion description. e.g.  {noformat}  <button class=""""btn btn-link px-1"""" aria-controls=""""gradingform_guide-7-criteria-5-description"""" aria-expanded=""""false"""" data-target=""""#gradingform_guide-7-criteria-5-description"""" data-toggle=""""collapse"""" type=""""button"""">  {noformat}  # Empty button description for the frequently-used comments picker button. e.g.  {noformat}  <button class=""""btn btn-icon form-inset-item icon-no-margin p-0 mt-1 mr-1 text-reset"""" aria-controls=""""gradingform_guide-7-criteria-5-remark-frequent-comments"""" aria-expanded=""""true"""" data-toggle=""""collapse"""" data-target=""""#gradingform_guide-7-criteria-5-remark-frequent-comments"""" type=""""button"""" id=""""yui_3_17_2_1_1586240583780_992"""">  {noformat}"""
"MDL-68427","2020/04/16 04:27:26","1.0","387.0","""paging_bar previous/next buttons have wrong page numbers""","""We are doing some incorrect math to work out the previous and next page numbers in {{paging_bar}}"""
"MDL-68442","2020/04/17 07:39:37","1.0","548.0","""Enrolment actions no longer work after dynamic table actions""","""The current participant table code for Viewing, Editing, and Removing enrolments binds to specific instances of buttons. When we reload the table those event handlers are dropped.    We need to update the code to make it safe to work with the dynamic table code."""
"MDL-68507","2020/04/24 09:06:21","1.0","250.0","""Provide site details when redirecting to moodlenet (tool_moodlenet 3.7 and 3.8""","""Please ensure when redirecting to moodlenet to provide details about our site and path.    Taken from chat with Jake:  {quote}OFFICIALSITECONFIGVALUE?site=URLENCODEDSITE&path=URLENCODEDPATH  {quote}  It's likely that both the mod_moodlenet plugin as well as the master implementation will have to be checked and updated.    Jake:   Here's the commit running on the prototype site for 3.8 right now ([https://github.com/moodle/moodle/commit/ccd0304161a3d8e9520e6167b97074084e991c9f]). We'll need to clean this up and add support for the case when a user enters their MoodleNet profile URL into the page (this commit only handles the """"Browse official"""" button), but it gives you the idea.    The main things we need:     *1*. tool_moodlenet: Fix tool_moodlenet_add_resource_redirect_url() so that when it's returning the 'instance.php' url, it also includes course and section params so these can be used in creation of the 'path' param that we'll provide to MoodleNet. Given the path param creation needs to happen on the instance page, the instance page needs to know the course and section.   *2.* tool_moodlenet: Make sure that when sending the user to MoodleNet, we send them to the following URL:    MOODLENETSITE?site=URLENCODEDSITE&path=URLENCODEDPATH    Where:   MOODLENETSITE is the URL of the users MoodleNet site, including the path to the (as yet to be determined) endpoint. e.g. [https://their.moodlenet.site|https://their.moodlenet.site/]   URLENCODEDSITE is the Moodle site ($CFG->wwwroot), urlencoded. E.g. urlencode(""""https//example.moodle.site"""");   URLENCODEDPATH is the path to the tool's import script, *including any params such as course and section*, also urlencoded. E.g. urlencode(""""/admin/tool/moodlenet/import.php?course=x&section=y"""");    *Note:* I would not recommend exploiting the renderable+template context as a way to get data into the rendered like I've done here. This was just a quick patch to test end to end comms with the test client."""
"MDL-68529","2020/04/26 10:05:13","3.0","640.0","""Activity chooser has to fetch data before showing""","""When you initially click to open the activity chooser nothing happens at first. The page must wait to perform an initial fetch of the module data before it even indicates that anything is happening.    It should instead show the dialogue immediately, as soon as the button is clicked, but show that it is loading.    One a slow connection this can take over half a second at the moment."""
"MDL-68705","2020/05/13 12:23:02","1.0","295.0","""Consider making composer self-update non blocking or optional""","""Right now, every behat or phpunit {{init.php}} executions does check if {{composer.phar}} is available @ dirroot.    A) If it's not available, it's downloaded.  B) if it's available, a {{self-update}} is executed.    Any error, kills the {{init.php}} execution, exiting with error.    That's ok 90% of times, but there are some cases where it can lead to unnecessary problems/processing:    1) Developer working offline. Impossible to run tests.  2) Problems @ {{getcomposer.org}}, irrespectively of already being updated.  3) {{composer.phar}} maintained by any other method.    In all those cases... it may be interesting to allow the {{self-update}} to be (one of):    a) make its execution optional (adding a {{--no-composer-update}} switch.  b) avoid problems to exit with error (adding a {{--no-error-on-composer-update}} switch.    Note that this doesn't affect A) (download the phar if missing), only updates.    So this issue is about to decide if it's worth adding some of those options, decide which one and implement it. Both for phpunit and behat {{init.php}} scripts. Then we may start adding them here and there.    Ciao :-)  """
"MDL-68723","2020/05/14 15:27:32","7.0","560.0","""Filemanager File tree view does not list all files.""","""Treeview in file manager does not always display files.    Found while testing MDLQA-14363 on qa.moodledemo.net   # Log in as a user and go to your Private files area.   # create a folder named Folder 0   # click on Folder 0   # create a folder named Folder 1   # drag and drop 2 files next to the folder named Folder 1.   # click on Folder 1   # create a folder named Folder 2   # drag and drop 2 files next to the folder named Folder 2.   # click on the Folder 2   # change the filemanager view to tree view.      Expected result: all files and folders appear in the tree view (when expanded)    Actual result: the files contained within folder 1 do not appear appear, only the folder structure appears    Note: if you switch back to folder (icon) view and navigate back to Folder 1 and then switch back to the tree view, then files appear."""
"MDL-68758","2020/05/18 15:56:38","1.0","305.0",""" The 'Download selected files' button should only display in the 'Display folder with file details' view""","""As found when testing MDLQA-14380:    Steps to reproduce:   # Log in as a user and add a few files and folders to your private files area.   # Save changes.   # Check the different views, 'Display folder with file icons', 'Display folder with file details' and 'Display folder as file tree' and make a note of which views the 'Download selected files' button is displayed in, and which views have select boxes.    Expected result: The 'Download selected files' button only displays in the 'Display folder with file details' view, where there are select boxes (as for the Delete button).    Actual result: The 'Download selected files' button is displayed in all views, which is confusing because there are no select boxes in two of the views."""
"MDL-68763","2020/05/19 03:58:03","7.0","937.0","""If only one import format option is available, skip the selection step for the user""","""This is driven by the link import case, in which there is only one handler - mod_url. In cases like this, rather than have the user select that single option (when there really is no choice to make), we should just skip this step and proceed with the import.    Currently, the options.php page handles self posts to create/import the resource. This assumes the user submit a form with sesskey on that page.     The options.php page however, can be reached via either the course select page (select.php - via a link) or the confirmation page (index.php - via a redirect), depending on whether or not the course has been provided. We shouldn't make state changes on these GET requests, though, so we can't just start an import on page load.    I think we'll need to decide where we want to check the handler count (i.e. where we make the decision about whether to auto-import or not) and how we plan to post to the options.php page from the other two pages."""
"MDL-68804","2020/05/22 06:10:33","1.0","345.0","""Not redirecting to the MoodleNet endpoint""","""When a user enters their MoodleNet profile URL into either:   a) the activity chooser pane (master) or   b) The instance select page (38)    The process should be to validate the profile and then redirect the user to the MoodleNet endpoint, where the MoodleNet instance will capture the site, course and section (this is a late change, adding course and section like this). Somehow, we've missed setting the endpoint in our redirects and we're not currently able to hand the user off properly.    The endpoint is:   lms/moodle/search    Making a request url look like   your.moodlenet.site/lms/moodle/search?site=xxx&course=yyy&section=z    What I'm seeing in the current branches (based on prototype site testing) is as follows:   Master (this is probably closer to correct):   I see a request to [https://home.next.moodle.net|https://home.next.moodle.net/] with site and path params correctly urlencoded and set. Here were only missing the endpoint path. We need to drop the path param as we no longer need to send this and add course and section params.    38 (this seems quite off the mark):    I see a request for the user's profile on MoodleNet, no params sent at all.    So, we need to fix this in both branches by the looks of it."""
"MDL-68807","2020/05/22 10:33:58","1.0","50.0","""Moodle assumes course and section are omitted when starting in MoodleNet, but these can be sent empty too [master and 37/38].""","""Identified on the prototype site, this comes down to the handling and validation of the course and section params in import.php. The fix should be small, but we should probably consider validating these properly (clean_param) - that seems to have been overlooked in my work on MDL-68698.    To replicate this one:   1. Take the new test client (see link in testing instructions) and start an import of the first item there - the cat.png without course and section   2. Notice that you'll see an SQL error, complaining about courseid being empty."""
"MDL-68928","2020/06/05 08:12:16","5.0","955.0","""Add a way to decide what plugin will show in the activity chooser footer""","""As mentioned by Jun during his review of MDL-67883 we add a way to allow site admins to decide what will be displayed in the activity chooser footer with the default set to MoodleNet.    This will help in the case another plugin implements the required callback and wins the race against MoodleNet.    See below for context:  h5. \core_course_external::get_activity_chooser_footer()   # I'm not sure whether we should be limiting the execution of other plugins implementing the """"{{_custom_chooser_footer}}"""" hook. If another plugin implements this function, but we still want to display the link to MoodleNet, if the call to """"{{\get_plugins_with_function()}}"""" runs the other plugin's implementation first, then the MoodleNet link won't be shown anymore. Perhaps we should remove the breaks in the loop and either do the following:   ** Allow the activity chooser footer to be able to display multiple activity_chooser_footer items from plugins.   ** Add an admin setting that allows the admin to select which `activity_chooser_footer` item should be displayed in the activity chooser footer. This would provide reliability on the item will be displayed in the activity chooser footer as opposed to the first-processed, first-displayed nature of the current implementation.   Let me know your thoughts. In any case, this can be done as a separate issue/follow up."""
"MDL-69079","2020/06/17 14:00:54","1.0","970.0","""Activity chooser does not display if site contains plugins missing from disk""","""In one of our Moodle 3.9 testing sites, we've found the new improved activity picker does not load in the following circumstances:   * a plugin has been deleted from the server, but uninstall hasn't taken place ==> this makes the plugin '*missing from disk*'.    Up until Moodle 3.8, it was possible to keep plugin configuration data in the database, while not having the files of the plugin on the server. This didn't block properly showing the activity picker.    We sometimes do this, to prevent losing the configuration data while the plugin is undergoing maintenance.     When you'd completely process the uninstall for an activity mod plugin, you lose all configuration and have to completely reinstall it once maintenance is finished.     Activity chooser does not display if site contains plugins missing from disk.     """
"MDL-69110","2020/06/22 17:04:43","2.0","231.0","""Sorting does not work anymore in non-dynamic tables""","""The classical method of sorting the various quiz attempts by clicking on the column link does not work well anymore. The first time you click on the link, attempts are sorted in descending order by the column selected, but subsequent clicks always do the same.    The expected behaviour is to invert the sort order with each click.    Also, the little black arrows indicating the present sort order are not shown anymore.    To reproduce:    Try to view the attempt list of some quiz with attempts. The page is <base URL>mod/quiz/report.php?id=1569&mode=overview  (the quiz ID will be different in your case, obviously)"""
"MDL-69238","2020/07/09 02:58:56","1.0","87.0","""Final removal of lib/coursecatlib.php""","""The file throws debugging saying 'Do not include coursecatlib.php' and isn't used anywhere. This was done in 3.6, so we can probably remove this file completely now."""
"MDL-69278","2020/07/15 03:52:11","1.0","285.0","""BeforeScenario hook failure leads to skipped test and rerun""","""When Selenium does fail in the BeforeScenario step it means that the exit code is non-zero, causing a re-run, but it also causes the Scenario to be _skipped_ rather than to fail.    If no other scenario step fails then the rerun.txt is empty.    Because the Suite returned non-zero, the Suite is rerun, but the lack of a rerun.txt means that the entire Suite reruns ad not just the failed test.    You can see that in the following job:    https://ci.moodle.org/job/S37.06.01%20-%20Behat%20-%20Chrome%20+%20Postgres%20+%20Classic/157/console    This happens because an Exception in a BeforeScenario hook leads to the Skip rather than Fail.    To resolve it we can apply the same approach as taken in the BeforeStep setup where a BeforeStep failure stores the exception in a statically defined var, and then the """"I look for exceptions"""" step finds it and fails the test.  This _may_ require an additional change to the behat extension to look for stored exceptions _before_ the step runs."""
"MDL-69297","2020/07/16 10:55:29","1.0","491.0","""File-based Assignments shouldn't accept submissions without any files""","""h1. Steps to reproduce  h2. As a teacher:   # Create new assignment with:   # Submission types = File submissions   # Require students to click the submit button = Yes    h2. As a student:   # On the assignment, Edit submission:   # Upload a file and save changes   # Open the Assignment page (with the Submit assignment button) _in two browser tabs_   # In one of the tabs, click and confirm the """"Remove submission"""" button (the submission now has no files)   # In the other tab, click Submit assignment and confirm.    h1. Expected results    Moodle rejects the submission, due to checking and finding that it had no files.  h1. Actual results    Moodle accepts the submission.  h1. Notes    Obviously this is a slightly pathological case, as it must take some malevolence or considerable confusion for a student to take those steps and create an empty submission - but I've had a student that appears to have managed just that!"""
"MDL-69391","2020/08/03 13:07:29","2.0","202.0","""Some dropdown menus have insufficient colour contrast between text and background ""","""Some examples:  # Calendar page: Course dropdown  # Navigation menu items (e.g. Language menu)    There might be more. Probably good to check out other action menus or select elements."""
"MDL-69525","2020/08/21 11:06:23","3.0","840.0","""Toggle-all checkbox publishes multiple events with an inconsistent data""","""When selecting/deselecting the toggle-all (parent) checkbox, multiple events with an inconsistent data are being fired. This makes it really hard for a subscriber to properly utilize the data. Also, this causes performance issues which are noticeable when attempting to bulk select larger set of data (takes ~ 5 sec to bulk select ~ 1000 records).    Ideally, a single event should be fired after changing the state of the toggle-all (parent) checkbox and it's data should reflect the final state of the child checkboxes in the specific toggle group.    Steps to reproduce:   # Unzip the attached local plugin into the /local/ directory of your moodle installation   # Login as Admin.   # Install the plugin and go to PATHTOMOODLEINSTANCE/local/checkboxtoggleallevents/index.php   # Click on the 'Toggle-all' (parent) checkbox for """"Checkbox Group 1"""" in order to select all checkboxes in Group 1.   # Open the console in the browser, the fired events should be captured in the console.    Result:    *Actual:* 7 events are being fired and captured in the console.    *Expected*: 1 event should be fired with data which reflects the current state of the specific toggle group (ex. all 3 child checkboxes from the toggle group """"participants-table option-1"""" are selected)"""
"MDL-69549","2020/08/24 07:11:24","2.0","4210.0","""Create course content export API""","""h3. API details    The proposed API for course export is a part of a new API for content.    The content API will include features for:  # identifying, locating, and controlling access of files within a component, or subsystem, which are a part of the File Storage API, or are served via one of the {{pluginfile.php}} endpoints (MDL-66006 / MDL-69708)  # identifying, locating, and describing text areas within Moodle; and  # exporitng content stored within a component, or subsystem.    The new API will be the {{content}} API, and will _not_ be a subsystem as it is expected to become more and more integral to parts of Moodle.    All core classes will be located in the {{core\content}} namespace, with subsystems and components placing their code and extensions of this API in {{[frankenstyle_component]\content}}.    The Content Export API will be located within the {{core\content\export}} namespace, and with subsystems and components placing their code and extensions of this API in {{[frankenstyle_component]\content\export}}.    h4. API Components  The API is made up of several core component types:  # The {{zipwriter}}, located in {{core\content\export\zipwriter}} is a wrapper around the {{ZipStream\ZipStream}} library and adds additional functionality and business logic related specifically to the export of content. It also includes helpers to add all pluginfiles which relate to a textarea, rewriting the @@PLUGINFILE@@ references in that textarea to point to the exported files.  # Exporters, located in {{core\content\export\exporters}} are the classes which perform the work of collecting all relevant content together, and adding it to the zipwriter for a given context;  # Exportable Items, located in {{core\content\export\exportable_items}} and extending the abstract {{core\content\export\exportable_item}} class are helpers which describe the content being exported and prepare it for export. These cover cases such as the export of a single {{stored_file}} object, all {{stored_file}} instances within a specific {{filearea}} in the {{file_storage}} API, and the ecport of a text field within the database. These exportable_items allow an indivdual component (subsystem or plugin) to describe in an abstract way the content that they include. Each exportable item additionally includes the logic to actually add the content it describes to the zipwriter archive.  # Items which have been exported, located in {{core\content\export\exported_item}} which provide a generic way for a component to describe what was exported in such a way that can be used for a human-readable HTML file. This includes features such as a title, shown to the user, a list of files, and any string content (typically a text field like a description) that relates to the exported item.      This API is designed to support the export of _course_ content including activities. At a sutiable time in the future it would be possible to extend it to support the export of blocks within a course, and other parts of the site, including course categories, or any other arbitrary context.    h5. Exporters  The exporters included in {{core\content\export\exporters}} as standard include:  # The abstract {{component_exporter}} which all other exporters must extend.  It includes helpers used to fetch the context being exported, the name of the component being exported, and the zipwriter.  It also includes helpers to export a set of exportable items.  It describes a {{get_exportables()}} function which, by default, returns an empty array.  # The abstract {{mod_instance_exporter}}, which extends the abstract {{component_exporter}}, and is intended to be extended by activities implementing the API.  For example, the {{mod_page}} component defines the {{mod_page\content\exporter}} which extends the {{mod_instance_exporter}}.  This class adds helpers for fetching the {{cm_info}} and activity name.  # The {{mod_exporter}} which is used to export generic data which is defined in core.  This is required as the """"{{intro}}"""" feature of activities is _not_ an instance feature, but a part of of the general API for activities.  For an activity support the {{intro}} field, it just has to declare that it supports the feature and core handles the rest.  This class does not define its own list of exportables, but rather takes in the list of exportables from an activity and handles their export.  It is a feature of the {{core\content\export}} API itself, and is not a part of the public API. It is declared final and cannot be extended. It is only called by the core API.  Essentially the calling code would look a little like the following:  {code}  foreach ($contexts as $context) {    $component = get_component_from_context($context); // Some made up function to get the mod_[name] from an activity context.    $exportables = [];      // Fetch the exportables that the activity instance defines.    $classname = component_exporter::get_classname_for_component($component);    if (class_exists($classname)) {      $exporter = new $classname($context, $component, $user, $archive);      $exportables = $exporter->get_exportables();    }      // Pass to the core mod_exporter to handle the remaining export.    $modexporter = new \core\content\export\exportables\mod_exporter($context, $component, $user, $archive);    $modexporter->export_exportables($exportables);  }  {code}  The {{export_exportables}} function is responsible for fetching the module intro, should the activity support it, adding all exportable content defined in the activity to the zipwriter, and generating a human-readable module index within the zip archive.  # The {{course_exporter}}, which is used to export a whole course.  Again this is not a part of the public API, and only called by {{core\content}} itself.  It does not return anything in the {{get_exportables()}} function but defines an {{export_course}} function which takes a list of all contexts which were successfully included in the export.  This function adds the course index to the zip stream, which includes all course sections, and links to each activity within the course.  Where an activity was included in the downloaded content, all links to the activity point to the module index created by the {{module_exporter}}.  Where an activity was _not_ included in the downloaded content, links will point to the live site. This will be used in the future to support cases where a specific activity has been configured to not be exported. This allows the course structure to remain and all data to be shown in context, but for those activities not exported to point to the live site instead.    h6. Course module exporters  Any individual activity/course module can define its own exporter.    Those included in this patch are for:  # {{mod_page}} - to export the {{Content}} part of a Page activity;  # {{mod_folder}} - to export all files and folders within the activity; and  # {{mod_resource}} - to export the single file within the activity.    Each activity extends the {{core\content\export\exporters\mod_instance_exporter}} class, must override the {{get_exportables}} function, and have that function return a list of {{exportable_item}} instances.    h5. Exportable items  Exportable items are used to describe all content to be exported in an abstract and simplified way so as to reduce duplication across the codebase.    All content is exported as either Text, or a collection of Files. No other types are supported or expected at this time.    Three standard item types are defined in core, but where these do not fit a component is able to write its own {{exportable_item}} type.    Most activities will likely export an {{exportable_textarea}}, which takes a table name, field name, and row ID.  For text areas which can have files embedded it also takes an optional {{filearea}}, and {{itemid}} which are used to fetch the file from the File Storage API, and an optional {{pluginfileitemid}} which is the itemid used in the {{/pluginfile.php/}} URL.  When adding to the archive, all files in the filearea/itemid will be added to the zip archive. As each file is added, the content will be rewritten to find any use of {{@@PLUGINFILE@@}} in the text which relates to that specific file, and rewrite it to point to the version stored in the zip archive.  After all files have been exported and the content is rewritten, any remaining uses of {{@@PLUGINFILE}} are rewritten to point to the live site, using the {{tokenpluginfile.php}} endpoint which allows viewing without requiring a current login.    For activities which purely export files, two additional types have been defined:  # the {{exportable_stored_file}}, which allows for a single file to be exported; and  # the {{exportable_filearea}}, which allows for all files within a {{filearea/itemid}} combination for a specific {{component + context}} combination to be exported    h5. Exported items  In order that exported content can be adequately described in a human-readable format, all exported content must be described in an {{exported_item}}.    This includes a Title, any string content, and two lists of files. It is consumed by the {{course_exporter}} and {{mod_exporter}} to create template data used in the Mustache templates."""
"MDL-69550","2020/08/24 07:11:57","1.0","248.0","""Implement content export API for mod_resource""","""Implement for mod_resource.    A single contentitem would be returned with the file name of the file in the resource. The {{type}} and {{id}} of the contentitem are inconsequential because there is only one item in a file resource.    This will also require definition of a new {{FEATURE_COURSECONTENTEXPORT}} constant and definition in {{resource_supports()}} in {{mod/resource/lib.php}}."""
"MDL-69556","2020/08/25 01:29:48","1.0","81.0","""Implement coursecontentexport API for mod_folder""","""Implement coursecontentexport API for mod_folder.    Need to determine the level of granularity required here but I would recommend that we list all top-level items, i.e. given the following folder structure within the module:  {code}  ├── Intro.pdf  ├── Lectures notes  │   ├── 20200813.ppt  │   ├── 20200820.ppt  │   └── 20200827.ppt  └── Videos      ├── 20200813      │   └── Lecture.mov      ├── 20200820      │   ├── Examples.mov      │   └── Lecture.mov      └── 20200827          └── Lecture.mov  {code}    The following course contentitems would be returned for selection:  || Name || type || id ||  | Intro.pdf | file | 3453 |  | Lectures notes | folder | 399 |  | Videos | folder | 99499 |      See notes in MDL-69550 for requirements re {{[modname]_supports()}} requirements."""
"MDL-69557","2020/08/25 01:30:35","1.0","348.0","""Implement content export API for mod_label""","""Implement content export API for mod_label"""
"MDL-69558","2020/08/25 01:30:45","1.0","86.0","""Implement coursecontentexport API for mod_page""","""Implement coursecontentexport API for mod_page"""
"MDL-69623","2020/09/03 07:49:22","15.0","4500.0","""Explore moving main menu items to the secondary navigation (backend) ""","""This builds on the issue which aimed to document current nav architecture. This issue should start to build a picture of what might be involved to achieve some of the new nav changes. The focus is on exploring a design.    This should also consider how tertiary nav could be implemented, as per the design mocks."""
"MDL-69649","2020/09/08 07:41:26","1.0","810.0","""Missing labels in restore page""","""There are missing labels in the """"{{Destination}}"""" step of the restore process.  # Radio buttons  # Search input box    For example, when restoring an activity backup in a course:   !activityrestore.png|thumbnail!   """
